<!DOCTYPE html>
<html lang="en" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduStream - Educational Media Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#eff6ff',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8'
                        }
                    }
                }
            }
        }
    </script>
    <style>
        .video-overlay {
            position: absolute;
            top: 0;
            left: 0;
            pointer-events: none;
        }
        .progress-ring {
            transform: rotate(-90deg);
        }
        .progress-ring-circle {
            transition: stroke-dashoffset 0.35s;
            transform-origin: 50% 50%;
        }
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 transition-colors duration-300">
    <!-- Navigation -->
    <nav class="bg-white dark:bg-gray-800 shadow-lg transition-colors duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <h1 class="text-2xl font-bold text-primary-600 dark:text-primary-400">üéì EduStream</h1>
                    </div>
                    <div class="hidden md:ml-6 md:flex md:space-x-8">
                        <a href="#" onclick="showPage('home')" class="nav-link text-gray-900 dark:text-gray-100 hover:text-primary-600 dark:hover:text-primary-400 px-3 py-2 text-sm font-medium transition-colors">Home</a>
                        <a href="#" onclick="showPage('courses')" class="nav-link text-gray-500 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 px-3 py-2 text-sm font-medium transition-colors">Courses</a>
                        <a href="#" onclick="showPage('dashboard')" class="nav-link text-gray-500 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 px-3 py-2 text-sm font-medium transition-colors">Dashboard</a>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <!-- Dark Mode Toggle -->
                    <button onclick="toggleDarkMode()" class="p-2 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">
                        <span class="dark-mode-icon hidden dark:block">‚òÄÔ∏è</span>
                        <span class="light-mode-icon block dark:hidden">üåô</span>
                    </button>
                    <!-- Cart -->
                    <button onclick="showPage('cart')" class="relative p-2 text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors">
                        üõí
                        <span id="cart-count" class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">0</span>
                    </button>
                    <!-- Auth Buttons -->
                    <div id="auth-buttons" class="flex space-x-2">
                        <button onclick="showPage('login')" class="px-4 py-2 text-sm font-medium text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 transition-colors">Login</button>
                        <button onclick="showPage('register')" class="px-4 py-2 text-sm font-medium bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors">Register</button>
                    </div>
                    <div id="user-menu" class="hidden flex items-center space-x-2">
                        <span id="user-name" class="text-sm font-medium text-gray-700 dark:text-gray-300"></span>
                        <button onclick="logout()" class="px-3 py-1 text-sm text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 transition-colors">Logout</button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Home Page -->
        <div id="home-page" class="page-content">
            <div class="text-center mb-12 fade-in">
                <h1 class="text-4xl font-bold text-gray-900 dark:text-white mb-4">Learn Anything, Anywhere</h1>
                <p class="text-xl text-gray-600 dark:text-gray-300 mb-8">Join thousands of students in our interactive learning platform</p>
                <button onclick="showPage('courses')" class="bg-primary-600 hover:bg-primary-700 text-white font-bold py-3 px-8 rounded-lg text-lg transition-colors">
                    Explore Courses
                </button>
            </div>

            <!-- Featured Courses -->
            <div class="grid md:grid-cols-3 gap-8 mb-12">
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden transition-colors fade-in">
                    <div class="h-48 bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center">
                        <span class="text-6xl">üé®</span>
                    </div>
                    <div class="p-6">
                        <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-2">Web Design Fundamentals</h3>
                        <p class="text-gray-600 dark:text-gray-300 mb-4">Learn the basics of modern web design with hands-on projects</p>
                        <div class="flex justify-between items-center">
                            <span class="text-2xl font-bold text-primary-600 dark:text-primary-400">$49</span>
                            <button onclick="addToCart(1)" class="bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg transition-colors">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                </div>

                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden transition-colors fade-in">
                    <div class="h-48 bg-gradient-to-r from-green-500 to-blue-600 flex items-center justify-center">
                        <span class="text-6xl">üíª</span>
                    </div>
                    <div class="p-6">
                        <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-2">JavaScript Mastery</h3>
                        <p class="text-gray-600 dark:text-gray-300 mb-4">Master JavaScript from basics to advanced concepts</p>
                        <div class="flex justify-between items-center">
                            <span class="text-2xl font-bold text-primary-600 dark:text-primary-400">$79</span>
                            <button onclick="addToCart(2)" class="bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg transition-colors">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                </div>

                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden transition-colors fade-in">
                    <div class="h-48 bg-gradient-to-r from-purple-500 to-pink-600 flex items-center justify-center">
                        <span class="text-6xl">üìä</span>
                    </div>
                    <div class="p-6">
                        <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-2">Data Science Basics</h3>
                        <p class="text-gray-600 dark:text-gray-300 mb-4">Introduction to data analysis and visualization</p>
                        <div class="flex justify-between items-center">
                            <span class="text-2xl font-bold text-primary-600 dark:text-primary-400">$99</span>
                            <button onclick="addToCart(3)" class="bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg transition-colors">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Login Page -->
        <div id="login-page" class="page-content hidden">
            <div class="max-w-md mx-auto bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 transition-colors fade-in">
                <h2 class="text-2xl font-bold text-center text-gray-900 dark:text-white mb-8">Login to EduStream</h2>
                <form id="login-form" onsubmit="handleLogin(event)">
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Email</label>
                        <input type="email" id="login-email" required 
                               class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 dark:bg-gray-700 dark:text-white transition-colors"
                               placeholder="Enter your email">
                        <div class="error-message text-red-500 text-sm mt-1 hidden"></div>
                    </div>
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Password</label>
                        <input type="password" id="login-password" required minlength="6"
                               class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 dark:bg-gray-700 dark:text-white transition-colors"
                               placeholder="Enter your password">
                        <div class="error-message text-red-500 text-sm mt-1 hidden"></div>
                    </div>
                    <button type="submit" class="w-full bg-primary-600 hover:bg-primary-700 text-white font-bold py-3 px-4 rounded-lg transition-colors flex items-center justify-center">
                        <span class="button-text">Login</span>
                        <div class="loading-spinner hidden ml-2"></div>
                    </button>
                </form>
                <p class="text-center text-gray-600 dark:text-gray-400 mt-4">
                    Don't have an account? 
                    <a href="#" onclick="showPage('register')" class="text-primary-600 dark:text-primary-400 hover:underline">Register here</a>
                </p>
            </div>
        </div>

        <!-- Register Page -->
        <div id="register-page" class="page-content hidden">
            <div class="max-w-md mx-auto bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 transition-colors fade-in">
                <h2 class="text-2xl font-bold text-center text-gray-900 dark:text-white mb-8">Join EduStream</h2>
                <form id="register-form" onsubmit="handleRegister(event)">
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Full Name</label>
                        <input type="text" id="register-name" required minlength="2"
                               class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 dark:bg-gray-700 dark:text-white transition-colors"
                               placeholder="Enter your full name">
                        <div class="error-message text-red-500 text-sm mt-1 hidden"></div>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Email</label>
                        <input type="email" id="register-email" required
                               class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 dark:bg-gray-700 dark:text-white transition-colors"
                               placeholder="Enter your email">
                        <div class="error-message text-red-500 text-sm mt-1 hidden"></div>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Password</label>
                        <input type="password" id="register-password" required minlength="8" 
                               pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$"
                               class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 dark:bg-gray-700 dark:text-white transition-colors"
                               placeholder="Enter your password">
                        <div class="error-message text-red-500 text-sm mt-1 hidden"></div>
                        <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Must contain uppercase, lowercase, number, and be 8+ characters</p>
                    </div>
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Confirm Password</label>
                        <input type="password" id="register-confirm" required
                               class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 dark:bg-gray-700 dark:text-white transition-colors"
                               placeholder="Confirm your password">
                        <div class="error-message text-red-500 text-sm mt-1 hidden"></div>
                    </div>
                    <button type="submit" class="w-full bg-primary-600 hover:bg-primary-700 text-white font-bold py-3 px-4 rounded-lg transition-colors flex items-center justify-center">
                        <span class="button-text">Create Account</span>
                        <div class="loading-spinner hidden ml-2"></div>
                    </button>
                </form>
                <p class="text-center text-gray-600 dark:text-gray-400 mt-4">
                    Already have an account? 
                    <a href="#" onclick="showPage('login')" class="text-primary-600 dark:text-primary-400 hover:underline">Login here</a>
                </p>
            </div>
        </div>

        <!-- Courses Page -->
        <div id="courses-page" class="page-content hidden">
            <div class="fade-in">
                <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-8">All Courses</h1>
                
                <!-- Course Categories -->
                <div class="mb-8">
                    <div class="flex flex-wrap gap-4">
                        <button onclick="filterCourses('all')" class="category-btn active bg-primary-600 text-white px-4 py-2 rounded-lg transition-colors">All Courses</button>
                        <button onclick="filterCourses('web-development')" class="category-btn bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">Web Development</button>
                        <button onclick="filterCourses('data-science')" class="category-btn bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">Data Science</button>
                        <button onclick="filterCourses('design')" class="category-btn bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">Design</button>
                        <button onclick="filterCourses('business')" class="category-btn bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">Business</button>
                        <button onclick="filterCourses('mobile')" class="category-btn bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">Mobile Development</button>
                    </div>
                </div>

                <!-- Course Grid -->
                <div id="courses-grid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Courses will be populated here -->
                </div>
            </div>
        </div>

        <!-- Course Detail Page -->
        <div id="course-page" class="page-content hidden">
            <div class="fade-in">
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden transition-colors">
                    <div class="p-8">
                        <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-4">JavaScript Mastery Course</h1>
                        <p class="text-gray-600 dark:text-gray-300 mb-8">Master JavaScript from basics to advanced concepts with interactive lessons and projects.</p>
                        
                        <!-- Video Player Section -->
                        <div class="relative mb-8">
                            <div class="relative bg-black rounded-lg overflow-hidden">
                                <video id="course-video" class="w-full h-64 md:h-96" controls>
                                    <source src="https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4" type="video/mp4">
                                    <source src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4" type="video/mp4">
                                    Your browser does not support the video tag.
                                </video>
                                <canvas id="video-overlay" class="video-overlay w-full h-64 md:h-96"></canvas>
                            </div>
                            
                            <!-- Custom Controls -->
                            <div class="bg-gray-100 dark:bg-gray-700 p-4 rounded-b-lg transition-colors">
                                <div class="flex items-center space-x-4">
                                    <button id="play-pause-btn" onclick="togglePlayPause()" class="bg-primary-600 hover:bg-primary-700 text-white p-2 rounded-full transition-colors">
                                        ‚ñ∂Ô∏è
                                    </button>
                                    <div class="flex-1">
                                        <input type="range" id="progress-bar" class="w-full" min="0" max="100" value="0">
                                    </div>
                                    <span id="time-display" class="text-sm text-gray-600 dark:text-gray-300">0:00 / 0:00</span>
                                    <input type="range" id="volume-control" class="w-20" min="0" max="100" value="100">
                                    <span class="text-sm">üîä</span>
                                </div>
                            </div>
                        </div>

                        <!-- Course Content -->
                        <div class="grid md:grid-cols-3 gap-8">
                            <div class="md:col-span-2">
                                <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">Course Content</h3>
                                <div class="space-y-4">
                                    <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg transition-colors">
                                        <h4 class="font-medium text-gray-900 dark:text-white">1. Introduction to JavaScript</h4>
                                        <p class="text-sm text-gray-600 dark:text-gray-300">Learn the basics and setup your development environment</p>
                                    </div>
                                    <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg transition-colors">
                                        <h4 class="font-medium text-gray-900 dark:text-white">2. Variables and Data Types</h4>
                                        <p class="text-sm text-gray-600 dark:text-gray-300">Understanding different data types and variable declarations</p>
                                    </div>
                                    <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg transition-colors">
                                        <h4 class="font-medium text-gray-900 dark:text-white">3. Functions and Scope</h4>
                                        <p class="text-sm text-gray-600 dark:text-gray-300">Master functions, closures, and scope in JavaScript</p>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <div class="bg-gray-50 dark:bg-gray-700 p-6 rounded-lg transition-colors">
                                    <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">Course Details</h3>
                                    <div class="space-y-3 text-sm">
                                        <div class="flex justify-between">
                                            <span class="text-gray-600 dark:text-gray-300">Duration:</span>
                                            <span class="text-gray-900 dark:text-white">12 hours</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-gray-600 dark:text-gray-300">Lessons:</span>
                                            <span class="text-gray-900 dark:text-white">24</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-gray-600 dark:text-gray-300">Level:</span>
                                            <span class="text-gray-900 dark:text-white">Beginner</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-gray-600 dark:text-gray-300">Price:</span>
                                            <span class="text-2xl font-bold text-primary-600 dark:text-primary-400">$79</span>
                                        </div>
                                    </div>
                                    <button onclick="addToCart(2)" class="w-full mt-6 bg-primary-600 hover:bg-primary-700 text-white font-bold py-3 px-4 rounded-lg transition-colors">
                                        Add to Cart
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Dashboard Page -->
        <div id="dashboard-page" class="page-content hidden">
            <div class="fade-in">
                <div class="flex justify-between items-center mb-8">
                    <h1 class="text-3xl font-bold text-gray-900 dark:text-white">Learning Dashboard</h1>
                    <div class="flex items-center space-x-4">
                        <div class="text-sm text-gray-600 dark:text-gray-400">
                            Last updated: <span id="last-updated" class="font-medium"></span>
                        </div>
                        <button onclick="refreshDashboard()" class="bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg text-sm transition-colors">
                            üîÑ Refresh
                        </button>
                    </div>
                </div>
                
                <!-- Stats Overview -->
                <div class="grid md:grid-cols-4 gap-6 mb-8">
                    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg transition-colors">
                        <div class="flex items-center">
                            <div class="p-3 bg-blue-100 dark:bg-blue-900 rounded-full">
                                <span class="text-2xl">üìö</span>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm text-gray-600 dark:text-gray-400">Courses Enrolled</p>
                                <p id="enrolled-count" class="text-2xl font-bold text-gray-900 dark:text-white">0</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg transition-colors">
                        <div class="flex items-center">
                            <div class="p-3 bg-green-100 dark:bg-green-900 rounded-full">
                                <span class="text-2xl">‚úÖ</span>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm text-gray-600 dark:text-gray-400">Completed</p>
                                <p id="completed-count" class="text-2xl font-bold text-gray-900 dark:text-white">0</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg transition-colors">
                        <div class="flex items-center">
                            <div class="p-3 bg-yellow-100 dark:bg-yellow-900 rounded-full">
                                <span class="text-2xl">‚è±Ô∏è</span>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm text-gray-600 dark:text-gray-400">Hours Learned</p>
                                <p id="hours-learned" class="text-2xl font-bold text-gray-900 dark:text-white">0</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg transition-colors">
                        <div class="flex items-center">
                            <div class="p-3 bg-purple-100 dark:bg-purple-900 rounded-full">
                                <span class="text-2xl">üèÜ</span>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm text-gray-600 dark:text-gray-400">Certificates</p>
                                <p id="certificates-count" class="text-2xl font-bold text-gray-900 dark:text-white">0</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Course Progress -->
                <div class="grid md:grid-cols-2 gap-8 mb-8">
                    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg transition-colors">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-xl font-semibold text-gray-900 dark:text-white">My Courses</h3>
                            <button onclick="simulateProgress()" class="text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 transition-colors">
                                üìà Simulate Progress
                            </button>
                        </div>
                        <div id="enrolled-courses" class="space-y-4">
                            <div class="text-center py-8 text-gray-500 dark:text-gray-400">
                                <span class="text-4xl block mb-2">üìö</span>
                                <p>No courses enrolled yet</p>
                                <button onclick="showPage('courses')" class="mt-4 text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 transition-colors">
                                    Browse Courses
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Learning Analytics -->
                    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg transition-colors">
                        <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-6">Learning Analytics</h3>
                        <div class="space-y-4">
                            <div class="flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                <div class="flex items-center space-x-3">
                                    <span class="text-2xl">üìÖ</span>
                                    <span class="text-sm font-medium text-gray-700 dark:text-gray-300">This Week</span>
                                </div>
                                <span id="weekly-hours" class="text-lg font-bold text-primary-600 dark:text-primary-400">0h</span>
                            </div>
                            <div class="flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                <div class="flex items-center space-x-3">
                                    <span class="text-2xl">üéØ</span>
                                    <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Avg. Session</span>
                                </div>
                                <span id="avg-session" class="text-lg font-bold text-primary-600 dark:text-primary-400">0m</span>
                            </div>
                            <div class="flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                <div class="flex items-center space-x-3">
                                    <span class="text-2xl">üî•</span>
                                    <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Current Streak</span>
                                </div>
                                <span id="current-streak" class="text-lg font-bold text-primary-600 dark:text-primary-400">0 days</span>
                            </div>
                            <div class="flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                <div class="flex items-center space-x-3">
                                    <span class="text-2xl">üìä</span>
                                    <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Completion Rate</span>
                                </div>
                                <span id="completion-rate" class="text-lg font-bold text-primary-600 dark:text-primary-400">0%</span>
                            </div>
                            <div class="flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                <div class="flex items-center space-x-3">
                                    <span class="text-2xl">‚≠ê</span>
                                    <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Favorite Category</span>
                                </div>
                                <span id="favorite-category" class="text-lg font-bold text-primary-600 dark:text-primary-400">None</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg transition-colors">
                    <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-6">Recent Activity</h3>
                    <div id="recent-activity" class="space-y-4">
                        <div class="text-center py-8 text-gray-500 dark:text-gray-400">
                            <span class="text-4xl block mb-2">üìù</span>
                            <p>No recent activity</p>
                        </div>
                    </div>
                </div>

                <!-- Achievement System -->
                <div class="mt-8 bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg transition-colors">
                    <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-6">Achievements</h3>
                    <div id="achievements" class="grid md:grid-cols-3 gap-4">
                        <!-- Achievements will be populated here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Cart Page -->
        <div id="cart-page" class="page-content hidden">
            <div class="fade-in">
                <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-8">Shopping Cart</h1>
                
                <div class="grid md:grid-cols-3 gap-8">
                    <div class="md:col-span-2">
                        <div id="cart-items" class="space-y-4">
                            <!-- Cart items will be populated here -->
                        </div>
                        <div id="empty-cart" class="text-center py-12 hidden">
                            <span class="text-6xl mb-4 block">üõí</span>
                            <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-2">Your cart is empty</h3>
                            <p class="text-gray-600 dark:text-gray-400 mb-6">Add some courses to get started!</p>
                            <button onclick="showPage('home')" class="bg-primary-600 hover:bg-primary-700 text-white px-6 py-3 rounded-lg transition-colors">
                                Browse Courses
                            </button>
                        </div>
                    </div>
                    
                    <div>
                        <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg transition-colors">
                            <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">Order Summary</h3>
                            <div class="space-y-3">
                                <div class="flex justify-between">
                                    <span class="text-gray-600 dark:text-gray-300">Subtotal:</span>
                                    <span id="cart-subtotal" class="text-gray-900 dark:text-white font-medium">$0</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600 dark:text-gray-300">Tax:</span>
                                    <span id="cart-tax" class="text-gray-900 dark:text-white font-medium">$0</span>
                                </div>
                                <hr class="border-gray-200 dark:border-gray-600">
                                <div class="flex justify-between">
                                    <span class="text-lg font-semibold text-gray-900 dark:text-white">Total:</span>
                                    <span id="cart-total" class="text-lg font-bold text-primary-600 dark:text-primary-400">$0</span>
                                </div>
                            </div>
                            <button id="checkout-btn" onclick="checkout()" class="w-full mt-6 bg-primary-600 hover:bg-primary-700 text-white font-bold py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                                Proceed to Checkout
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Page -->
        <div id="settings-page" class="page-content hidden">
            <div class="fade-in">
                <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-8">Settings</h1>
                
                <div class="max-w-2xl">
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 transition-colors">
                        <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-6">Preferences</h3>
                        
                        <div class="space-y-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <h4 class="text-lg font-medium text-gray-900 dark:text-white">Dark Mode</h4>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">Toggle between light and dark themes</p>
                                </div>
                                <button onclick="toggleDarkMode()" class="relative inline-flex h-6 w-11 items-center rounded-full bg-gray-200 dark:bg-gray-600 transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2">
                                    <span class="dark-mode-toggle inline-block h-4 w-4 transform rounded-full bg-white transition-transform dark:translate-x-6"></span>
                                </button>
                            </div>
                            
                            <div class="border-t border-gray-200 dark:border-gray-600 pt-6">
                                <h4 class="text-lg font-medium text-gray-900 dark:text-white mb-4">Notifications</h4>
                                <div class="space-y-3">
                                    <label class="flex items-center">
                                        <input type="checkbox" checked class="rounded border-gray-300 text-primary-600 focus:ring-primary-500">
                                        <span class="ml-2 text-sm text-gray-700 dark:text-gray-300">Email notifications for new courses</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" checked class="rounded border-gray-300 text-primary-600 focus:ring-primary-500">
                                        <span class="ml-2 text-sm text-gray-700 dark:text-gray-300">Course completion reminders</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" class="rounded border-gray-300 text-primary-600 focus:ring-primary-500">
                                        <span class="ml-2 text-sm text-gray-700 dark:text-gray-300">Weekly progress reports</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Success/Error Messages -->
    <div id="message-container" class="fixed top-4 right-4 z-50"></div>

    <script>
        // Global State
        let currentUser = null;
        let cart = [];
        let userProgress = {};

        let courses = [
            { id: 1, title: "Web Design Fundamentals", price: 49, image: "üé®", category: "design", description: "Learn the basics of modern web design with hands-on projects", duration: "8 hours", lessons: 16, level: "Beginner" },
            { id: 2, title: "JavaScript Mastery", price: 79, image: "üíª", category: "web-development", description: "Master JavaScript from basics to advanced concepts", duration: "12 hours", lessons: 24, level: "Intermediate" },
            { id: 3, title: "Data Science Basics", price: 99, image: "üìä", category: "data-science", description: "Introduction to data analysis and visualization", duration: "15 hours", lessons: 30, level: "Beginner" },
            { id: 4, title: "React Development", price: 89, image: "‚öõÔ∏è", category: "web-development", description: "Build modern web applications with React", duration: "14 hours", lessons: 28, level: "Intermediate" },
            { id: 5, title: "Python for Beginners", price: 69, image: "üêç", category: "web-development", description: "Learn Python programming from scratch", duration: "10 hours", lessons: 20, level: "Beginner" },
            { id: 6, title: "Machine Learning Fundamentals", price: 129, image: "ü§ñ", category: "data-science", description: "Introduction to machine learning algorithms", duration: "18 hours", lessons: 36, level: "Advanced" },
            { id: 7, title: "UI/UX Design Principles", price: 79, image: "üéØ", category: "design", description: "Master user interface and experience design", duration: "12 hours", lessons: 24, level: "Intermediate" },
            { id: 8, title: "Digital Marketing Strategy", price: 59, image: "üìà", category: "business", description: "Learn effective digital marketing techniques", duration: "8 hours", lessons: 16, level: "Beginner" },
            { id: 9, title: "iOS App Development", price: 109, image: "üì±", category: "mobile", description: "Build iOS apps with Swift and SwiftUI", duration: "16 hours", lessons: 32, level: "Intermediate" },
            { id: 10, title: "Android Development", price: 99, image: "ü§ñ", category: "mobile", description: "Create Android apps with Kotlin", duration: "14 hours", lessons: 28, level: "Intermediate" },
            { id: 11, title: "Graphic Design Mastery", price: 69, image: "üé®", category: "design", description: "Professional graphic design techniques", duration: "10 hours", lessons: 20, level: "Beginner" },
            { id: 12, title: "Business Analytics", price: 89, image: "üìä", category: "business", description: "Data-driven business decision making", duration: "12 hours", lessons: 24, level: "Intermediate" },
            { id: 13, title: "Node.js Backend Development", price: 95, image: "üü¢", category: "web-development", description: "Server-side JavaScript with Node.js", duration: "13 hours", lessons: 26, level: "Intermediate" },
            { id: 14, title: "Deep Learning with TensorFlow", price: 149, image: "üß†", category: "data-science", description: "Advanced neural networks and deep learning", duration: "20 hours", lessons: 40, level: "Advanced" },
            { id: 15, title: "Flutter Cross-Platform Development", price: 119, image: "ü¶ã", category: "mobile", description: "Build apps for iOS and Android with Flutter", duration: "15 hours", lessons: 30, level: "Intermediate" }
        ];

        // Backend-like Data Management
        class UserDataManager {
            constructor() {
                this.storageKey = 'edustream_user_data';
                this.achievements = [
                    { id: 'first_purchase', name: 'First Purchase', description: 'Made your first course purchase', icon: 'üõí', unlocked: false },
                    { id: 'course_collector', name: 'Course Collector', description: 'Enrolled in 5 courses', icon: 'üìö', unlocked: false },
                    { id: 'quick_learner', name: 'Quick Learner', description: 'Completed first course', icon: '‚ö°', unlocked: false },
                    { id: 'dedicated_student', name: 'Dedicated Student', description: 'Studied for 20+ hours', icon: 'üéì', unlocked: false },
                    { id: 'certificate_earner', name: 'Certificate Earner', description: 'Earned 3 certificates', icon: 'üèÜ', unlocked: false },
                    { id: 'streak_master', name: 'Streak Master', description: '7-day learning streak', icon: 'üî•', unlocked: false }
                ];
            }

            getUserData() {
                if (!currentUser) return null;
                const data = localStorage.getItem(`${this.storageKey}_${currentUser.id}`);
                return data ? JSON.parse(data) : this.createDefaultUserData();
            }

            createDefaultUserData() {
                return {
                    enrolledCourses: [],
                    completedCourses: [],
                    totalHoursLearned: 0,
                    certificates: [],
                    weeklyHours: [0, 0, 0, 0, 0, 0, 0],
                    recentActivity: [],
                    achievements: [...this.achievements],
                    lastUpdated: new Date().toISOString(),
                    purchaseHistory: [],
                    currentStreak: 0,
                    longestStreak: 0
                };
            }

            saveUserData(data) {
                if (!currentUser) return;
                data.lastUpdated = new Date().toISOString();
                localStorage.setItem(`${this.storageKey}_${currentUser.id}`, JSON.stringify(data));
            }

            enrollUserInCourse(courseId) {
                const userData = this.getUserData();
                const course = courses.find(c => c.id === courseId);
                
                if (!course || userData.enrolledCourses.find(c => c.id === courseId)) {
                    return userData;
                }

                const enrolledCourse = {
                    ...course,
                    enrolledDate: new Date().toISOString(),
                    progress: 0,
                    completedLessons: 0,
                    timeSpent: 0,
                    lastAccessed: new Date().toISOString()
                };

                userData.enrolledCourses.push(enrolledCourse);
                userData.recentActivity.unshift({
                    id: Date.now(),
                    type: 'enrollment',
                    message: `Enrolled in "${course.title}"`,
                    timestamp: new Date().toISOString(),
                    icon: 'üìö'
                });

                userData.purchaseHistory.push({
                    courseId: courseId,
                    courseName: course.title,
                    price: course.price,
                    purchaseDate: new Date().toISOString()
                });

                // Check achievements
                this.checkAchievements(userData);
                this.saveUserData(userData);
                return userData;
            }

            updateCourseProgress(courseId, progressData) {
                const userData = this.getUserData();
                const courseIndex = userData.enrolledCourses.findIndex(c => c.id === courseId);
                
                if (courseIndex === -1) return userData;

                const course = userData.enrolledCourses[courseIndex];
                course.progress = progressData.progress || course.progress;
                course.completedLessons = progressData.completedLessons || course.completedLessons;
                course.timeSpent = progressData.timeSpent || course.timeSpent;
                course.lastAccessed = new Date().toISOString();

                // Update total hours
                userData.totalHoursLearned += (progressData.timeSpent - course.timeSpent) || 0;

                // Update weekly hours (add to current day)
                const today = new Date().getDay();
                userData.weeklyHours[today] += progressData.sessionTime || 0;

                // Check if course is completed
                if (course.progress >= 100 && !userData.completedCourses.find(c => c.id === courseId)) {
                    userData.completedCourses.push({
                        ...course,
                        completedDate: new Date().toISOString()
                    });

                    userData.certificates.push({
                        courseId: courseId,
                        courseName: course.title,
                        issuedDate: new Date().toISOString(),
                        certificateId: `CERT-${courseId}-${Date.now()}`
                    });

                    userData.recentActivity.unshift({
                        id: Date.now(),
                        type: 'completion',
                        message: `Completed "${course.title}" and earned certificate`,
                        timestamp: new Date().toISOString(),
                        icon: 'üèÜ'
                    });
                }

                // Add recent activity for progress
                if (progressData.sessionTime > 0) {
                    userData.recentActivity.unshift({
                        id: Date.now(),
                        type: 'progress',
                        message: `Studied "${course.title}" for ${Math.round(progressData.sessionTime)} minutes`,
                        timestamp: new Date().toISOString(),
                        icon: 'üìñ'
                    });
                }

                // Limit recent activity to 10 items
                userData.recentActivity = userData.recentActivity.slice(0, 10);

                this.checkAchievements(userData);
                this.saveUserData(userData);
                return userData;
            }

            checkAchievements(userData) {
                // First Purchase
                if (userData.purchaseHistory.length >= 1) {
                    this.unlockAchievement(userData, 'first_purchase');
                }

                // Course Collector
                if (userData.enrolledCourses.length >= 5) {
                    this.unlockAchievement(userData, 'course_collector');
                }

                // Quick Learner
                if (userData.completedCourses.length >= 1) {
                    this.unlockAchievement(userData, 'quick_learner');
                }

                // Dedicated Student
                if (userData.totalHoursLearned >= 20) {
                    this.unlockAchievement(userData, 'dedicated_student');
                }

                // Certificate Earner
                if (userData.certificates.length >= 3) {
                    this.unlockAchievement(userData, 'certificate_earner');
                }

                // Streak Master (simplified - just check if user has been active)
                if (userData.recentActivity.length >= 7) {
                    this.unlockAchievement(userData, 'streak_master');
                }
            }

            unlockAchievement(userData, achievementId) {
                const achievement = userData.achievements.find(a => a.id === achievementId);
                if (achievement && !achievement.unlocked) {
                    achievement.unlocked = true;
                    achievement.unlockedDate = new Date().toISOString();
                    
                    userData.recentActivity.unshift({
                        id: Date.now(),
                        type: 'achievement',
                        message: `Unlocked achievement: "${achievement.name}"`,
                        timestamp: new Date().toISOString(),
                        icon: achievement.icon
                    });

                    // Show achievement notification
                    showMessage(`üéâ Achievement Unlocked: ${achievement.name}!`, 'success');
                }
            }

            simulateProgressUpdate() {
                const userData = this.getUserData();
                if (userData.enrolledCourses.length === 0) return userData;

                // Randomly select a course to update
                const randomCourse = userData.enrolledCourses[Math.floor(Math.random() * userData.enrolledCourses.length)];
                const progressIncrease = Math.random() * 20 + 5; // 5-25% progress
                const timeIncrease = Math.random() * 60 + 15; // 15-75 minutes

                return this.updateCourseProgress(randomCourse.id, {
                    progress: Math.min(100, randomCourse.progress + progressIncrease),
                    completedLessons: Math.min(randomCourse.lessons, randomCourse.completedLessons + Math.floor(progressIncrease / 10)),
                    timeSpent: randomCourse.timeSpent + timeIncrease,
                    sessionTime: timeIncrease
                });
            }
        }

        const userDataManager = new UserDataManager();

        // Initialize App
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            setupFormValidation();
            setupVideoPlayer();
            displayCourses();
        });

        function initializeApp() {
            // Load theme preference
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.documentElement.classList.add('dark');
            }

            // Load user session
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                updateAuthUI();
                updateDashboard();
            }

            // Load cart
            const savedCart = localStorage.getItem('cart');
            if (savedCart) {
                cart = JSON.parse(savedCart);
                updateCartUI();
            }

            // Update last updated time
            updateLastUpdatedTime();
        }

        function updateLastUpdatedTime() {
            const lastUpdatedElement = document.getElementById('last-updated');
            if (lastUpdatedElement) {
                lastUpdatedElement.textContent = new Date().toLocaleTimeString();
            }
        }

        // Theme Management
        function toggleDarkMode() {
            const html = document.documentElement;
            const isDark = html.classList.contains('dark');
            
            if (isDark) {
                html.classList.remove('dark');
                localStorage.setItem('theme', 'light');
            } else {
                html.classList.add('dark');
                localStorage.setItem('theme', 'dark');
            }
        }

        // Navigation
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page-content').forEach(page => {
                page.classList.add('hidden');
            });
            
            // Show selected page
            const targetPage = document.getElementById(pageId + '-page');
            if (targetPage) {
                targetPage.classList.remove('hidden');
                targetPage.classList.add('fade-in');
            }

            // Update dashboard when showing dashboard page
            if (pageId === 'dashboard' && currentUser) {
                updateDashboard();
            }

            // Update navigation
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('text-gray-900', 'dark:text-gray-100');
                link.classList.add('text-gray-500', 'dark:text-gray-300');
            });
        }

        // Dashboard Management
        function updateDashboard() {
            if (!currentUser) return;

            const userData = userDataManager.getUserData();
            
            // Update stats
            document.getElementById('enrolled-count').textContent = userData.enrolledCourses.length;
            document.getElementById('completed-count').textContent = userData.completedCourses.length;
            document.getElementById('hours-learned').textContent = Math.round(userData.totalHoursLearned);
            document.getElementById('certificates-count').textContent = userData.certificates.length;

            // Update enrolled courses
            updateEnrolledCourses(userData);
            
            // Update recent activity
            updateRecentActivity(userData);
            
            // Update achievements
            updateAchievements(userData);
            
            // Update analytics
            updateLearningAnalytics(userData);
            
            // Update last updated time
            updateLastUpdatedTime();
        }

        function updateEnrolledCourses(userData) {
            const enrolledCoursesContainer = document.getElementById('enrolled-courses');
            
            if (userData.enrolledCourses.length === 0) {
                enrolledCoursesContainer.innerHTML = `
                    <div class="text-center py-8 text-gray-500 dark:text-gray-400">
                        <span class="text-4xl block mb-2">üìö</span>
                        <p>No courses enrolled yet</p>
                        <button onclick="showPage('courses')" class="mt-4 text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 transition-colors">
                            Browse Courses
                        </button>
                    </div>
                `;
                return;
            }

            enrolledCoursesContainer.innerHTML = userData.enrolledCourses.map(course => `
                <div class="border border-gray-200 dark:border-gray-600 rounded-lg p-4 transition-colors">
                    <div class="flex justify-between items-start mb-2">
                        <h4 class="font-medium text-gray-900 dark:text-white">${course.title}</h4>
                        <span class="text-sm text-gray-500 dark:text-gray-400">${Math.round(course.progress)}%</span>
                    </div>
                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-2">
                        <div class="bg-primary-600 h-2 rounded-full transition-all duration-500" style="width: ${course.progress}%"></div>
                    </div>
                    <div class="flex justify-between text-xs text-gray-500 dark:text-gray-400">
                        <span>${course.completedLessons}/${course.lessons} lessons</span>
                        <span>${Math.round(course.timeSpent)} min studied</span>
                    </div>
                    <div class="mt-2 flex justify-between items-center">
                        <span class="text-xs text-gray-400">Last accessed: ${new Date(course.lastAccessed).toLocaleDateString()}</span>
                        <button onclick="continueLesson(${course.id})" class="text-xs text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 transition-colors">
                            Continue ‚Üí
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function updateRecentActivity(userData) {
            const recentActivityContainer = document.getElementById('recent-activity');
            
            if (userData.recentActivity.length === 0) {
                recentActivityContainer.innerHTML = `
                    <div class="text-center py-8 text-gray-500 dark:text-gray-400">
                        <span class="text-4xl block mb-2">üìù</span>
                        <p>No recent activity</p>
                    </div>
                `;
                return;
            }

            recentActivityContainer.innerHTML = userData.recentActivity.map(activity => `
                <div class="flex items-center space-x-4">
                    <div class="w-10 h-10 bg-${getActivityColor(activity.type)}-100 dark:bg-${getActivityColor(activity.type)}-900 rounded-full flex items-center justify-center">
                        <span class="text-${getActivityColor(activity.type)}-600 dark:text-${getActivityColor(activity.type)}-400">${activity.icon}</span>
                    </div>
                    <div class="flex-1">
                        <p class="text-sm font-medium text-gray-900 dark:text-white">${activity.message}</p>
                        <p class="text-xs text-gray-500 dark:text-gray-400">${getTimeAgo(activity.timestamp)}</p>
                    </div>
                </div>
            `).join('');
        }

        function updateAchievements(userData) {
            const achievementsContainer = document.getElementById('achievements');
            
            achievementsContainer.innerHTML = userData.achievements.map(achievement => `
                <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg transition-colors ${achievement.unlocked ? 'ring-2 ring-primary-500' : 'opacity-60'}">
                    <div class="text-center">
                        <div class="text-3xl mb-2 ${achievement.unlocked ? '' : 'grayscale'}">${achievement.icon}</div>
                        <h4 class="font-medium text-gray-900 dark:text-white text-sm">${achievement.name}</h4>
                        <p class="text-xs text-gray-600 dark:text-gray-400 mt-1">${achievement.description}</p>
                        ${achievement.unlocked ? `<div class="mt-2 text-xs text-primary-600 dark:text-primary-400">Unlocked!</div>` : ''}
                    </div>
                </div>
            `).join('');
        }

        function updateLearningAnalytics(userData) {
            // Calculate weekly hours
            const weeklyMinutes = userData.weeklyHours.reduce((sum, hours) => sum + hours, 0);
            const weeklyHours = Math.round(weeklyMinutes / 60 * 10) / 10;
            document.getElementById('weekly-hours').textContent = `${weeklyHours}h`;

            // Calculate average session time
            const totalSessions = userData.recentActivity.filter(a => a.type === 'progress').length || 1;
            const avgSession = Math.round(userData.totalHoursLearned * 60 / totalSessions);
            document.getElementById('avg-session').textContent = `${avgSession}m`;

            // Current streak (simplified calculation)
            const streak = Math.min(userData.recentActivity.length, 7);
            document.getElementById('current-streak').textContent = `${streak} days`;

            // Completion rate
            const completionRate = userData.enrolledCourses.length > 0 
                ? Math.round((userData.completedCourses.length / userData.enrolledCourses.length) * 100)
                : 0;
            document.getElementById('completion-rate').textContent = `${completionRate}%`;

            // Favorite category
            const categories = userData.enrolledCourses.map(course => course.category);
            const categoryCount = categories.reduce((acc, cat) => {
                acc[cat] = (acc[cat] || 0) + 1;
                return acc;
            }, {});
            
            const favoriteCategory = Object.keys(categoryCount).length > 0
                ? Object.keys(categoryCount).reduce((a, b) => categoryCount[a] > categoryCount[b] ? a : b)
                : 'None';
            
            const displayCategory = favoriteCategory !== 'None' 
                ? favoriteCategory.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase())
                : 'None';
            
            document.getElementById('favorite-category').textContent = displayCategory;
        }

        function refreshDashboard() {
            if (!currentUser) return;
            
            showMessage('Refreshing dashboard...', 'info');
            
            // Simulate API call delay
            setTimeout(() => {
                updateDashboard();
                showMessage('Dashboard updated!', 'success');
            }, 1000);
        }

        function simulateProgress() {
            if (!currentUser) return;
            
            const userData = userDataManager.getUserData();
            if (userData.enrolledCourses.length === 0) {
                showMessage('Enroll in a course first to simulate progress!', 'error');
                return;
            }

            showMessage('Simulating learning progress...', 'info');
            
            setTimeout(() => {
                userDataManager.simulateProgressUpdate();
                updateDashboard();
                showMessage('Progress updated! Keep learning! üìö', 'success');
            }, 1500);
        }

        function continueLesson(courseId) {
            showCourseDetail(courseId);
        }

        // Utility functions for dashboard
        function getActivityColor(type) {
            const colors = {
                enrollment: 'blue',
                progress: 'green',
                completion: 'purple',
                achievement: 'yellow'
            };
            return colors[type] || 'gray';
        }

        function getTimeAgo(timestamp) {
            const now = new Date();
            const time = new Date(timestamp);
            const diffInMinutes = Math.floor((now - time) / (1000 * 60));
            
            if (diffInMinutes < 1) return 'Just now';
            if (diffInMinutes < 60) return `${diffInMinutes} minutes ago`;
            if (diffInMinutes < 1440) return `${Math.floor(diffInMinutes / 60)} hours ago`;
            return `${Math.floor(diffInMinutes / 1440)} days ago`;
        }

        // Course Management
        function displayCourses(category = 'all') {
            const coursesGrid = document.getElementById('courses-grid');
            if (!coursesGrid) return;

            const filteredCourses = category === 'all' ? courses : courses.filter(course => course.category === category);

            coursesGrid.innerHTML = filteredCourses.map(course => `
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden transition-colors hover:shadow-xl">
                    <div class="h-48 bg-gradient-to-r ${getGradientForCategory(course.category)} flex items-center justify-center">
                        <span class="text-6xl">${course.image}</span>
                    </div>
                    <div class="p-6">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-xs font-medium text-primary-600 dark:text-primary-400 uppercase tracking-wide">${course.category.replace('-', ' ')}</span>
                            <span class="text-xs text-gray-500 dark:text-gray-400">${course.level}</span>
                        </div>
                        <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-2">${course.title}</h3>
                        <p class="text-gray-600 dark:text-gray-300 mb-4 text-sm">${course.description}</p>
                        <div class="flex items-center text-sm text-gray-500 dark:text-gray-400 mb-4 space-x-4">
                            <span>‚è±Ô∏è ${course.duration}</span>
                            <span>üìö ${course.lessons} lessons</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-2xl font-bold text-primary-600 dark:text-primary-400">$${course.price}</span>
                            <div class="space-x-2">
                                <button onclick="showCourseDetail(${course.id})" class="text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 text-sm font-medium transition-colors">
                                    View Details
                                </button>
                                <button onclick="addToCart(${course.id})" class="bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg text-sm transition-colors">
                                    Add to Cart
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function getGradientForCategory(category) {
            const gradients = {
                'web-development': 'from-blue-500 to-purple-600',
                'data-science': 'from-green-500 to-blue-600',
                'design': 'from-purple-500 to-pink-600',
                'business': 'from-orange-500 to-red-600',
                'mobile': 'from-indigo-500 to-purple-600'
            };
            return gradients[category] || 'from-gray-500 to-gray-600';
        }

        function filterCourses(category) {
            // Update active button
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('active', 'bg-primary-600', 'text-white');
                btn.classList.add('bg-gray-200', 'dark:bg-gray-700', 'text-gray-700', 'dark:text-gray-300');
            });
            
            event.target.classList.add('active', 'bg-primary-600', 'text-white');
            event.target.classList.remove('bg-gray-200', 'dark:bg-gray-700', 'text-gray-700', 'dark:text-gray-300');

            displayCourses(category);
        }

        function showCourseDetail(courseId) {
            const course = courses.find(c => c.id === courseId);
            if (!course) return;

            // Update course detail page content
            const courseDetailPage = document.getElementById('course-page');
            courseDetailPage.innerHTML = `
                <div class="fade-in">
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden transition-colors">
                        <div class="p-8">
                            <div class="flex items-center mb-4">
                                <button onclick="showPage('courses')" class="text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 mr-4">
                                    ‚Üê Back to Courses
                                </button>
                                <span class="text-sm font-medium text-primary-600 dark:text-primary-400 uppercase tracking-wide">${course.category.replace('-', ' ')}</span>
                            </div>
                            <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-4">${course.title}</h1>
                            <p class="text-gray-600 dark:text-gray-300 mb-8">${course.description}</p>
                            
                            <!-- Video Player Section -->
                            <div class="relative mb-8">
                                <div class="relative bg-black rounded-lg overflow-hidden">
                                    <video id="course-video" class="w-full h-64 md:h-96" controls>
                                        <source src="https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4" type="video/mp4">
                                        <source src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4" type="video/mp4">
                                        Your browser does not support the video tag.
                                    </video>
                                    <canvas id="video-overlay" class="video-overlay w-full h-64 md:h-96"></canvas>
                                </div>
                                
                                <!-- Custom Controls -->
                                <div class="bg-gray-100 dark:bg-gray-700 p-4 rounded-b-lg transition-colors">
                                    <div class="flex items-center space-x-4">
                                        <button id="play-pause-btn" onclick="togglePlayPause()" class="bg-primary-600 hover:bg-primary-700 text-white p-2 rounded-full transition-colors">
                                            ‚ñ∂Ô∏è
                                        </button>
                                        <div class="flex-1">
                                            <input type="range" id="progress-bar" class="w-full" min="0" max="100" value="0">
                                        </div>
                                        <span id="time-display" class="text-sm text-gray-600 dark:text-gray-300">0:00 / 0:00</span>
                                        <input type="range" id="volume-control" class="w-20" min="0" max="100" value="100">
                                        <span class="text-sm">üîä</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Course Content -->
                            <div class="grid md:grid-cols-3 gap-8">
                                <div class="md:col-span-2">
                                    <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">Course Content</h3>
                                    <div class="space-y-4">
                                        ${generateCourseLessons(course)}
                                    </div>
                                </div>
                                <div>
                                    <div class="bg-gray-50 dark:bg-gray-700 p-6 rounded-lg transition-colors">
                                        <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">Course Details</h3>
                                        <div class="space-y-3 text-sm">
                                            <div class="flex justify-between">
                                                <span class="text-gray-600 dark:text-gray-300">Duration:</span>
                                                <span class="text-gray-900 dark:text-white">${course.duration}</span>
                                            </div>
                                            <div class="flex justify-between">
                                                <span class="text-gray-600 dark:text-gray-300">Lessons:</span>
                                                <span class="text-gray-900 dark:text-white">${course.lessons}</span>
                                            </div>
                                            <div class="flex justify-between">
                                                <span class="text-gray-600 dark:text-gray-300">Level:</span>
                                                <span class="text-gray-900 dark:text-white">${course.level}</span>
                                            </div>
                                            <div class="flex justify-between">
                                                <span class="text-gray-600 dark:text-gray-300">Price:</span>
                                                <span class="text-2xl font-bold text-primary-600 dark:text-primary-400">$${course.price}</span>
                                            </div>
                                        </div>
                                        <button onclick="addToCart(${course.id})" class="w-full mt-6 bg-primary-600 hover:bg-primary-700 text-white font-bold py-3 px-4 rounded-lg transition-colors">
                                            Add to Cart
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            showPage('course');
            // Re-setup video player for the new content
            setTimeout(() => setupVideoPlayer(), 100);
        }

        function generateCourseLessons(course) {
            const lessonTopics = {
                'web-development': ['Introduction & Setup', 'Variables & Data Types', 'Functions & Scope', 'DOM Manipulation', 'Async Programming'],
                'data-science': ['Data Collection', 'Data Cleaning', 'Exploratory Analysis', 'Statistical Methods', 'Visualization'],
                'design': ['Design Principles', 'Color Theory', 'Typography', 'Layout & Composition', 'User Experience'],
                'business': ['Market Research', 'Strategy Development', 'Implementation', 'Analytics & Metrics', 'Optimization'],
                'mobile': ['Platform Setup', 'UI Components', 'Navigation', 'Data Management', 'Publishing']
            };

            const topics = lessonTopics[course.category] || ['Introduction', 'Fundamentals', 'Intermediate Concepts', 'Advanced Topics', 'Final Project'];
            
            return topics.map((topic, index) => `
                <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg transition-colors">
                    <h4 class="font-medium text-gray-900 dark:text-white">${index + 1}. ${topic}</h4>
                    <p class="text-sm text-gray-600 dark:text-gray-300">Learn about ${topic.toLowerCase()} in ${course.title}</p>
                </div>
            `).join('');
        }

        // Authentication
        function handleLogin(event) {
            event.preventDefault();
            const form = event.target;
            const email = form.querySelector('#login-email').value;
            const password = form.querySelector('#login-password').value;

            showLoading(form);

            // Simulate API call
            setTimeout(() => {
                if (email && password.length >= 6) {
                    currentUser = {
                        id: email.replace(/[^a-zA-Z0-9]/g, ''), // Simple ID generation
                        name: email.split('@')[0],
                        email: email,
                        token: 'jwt-token-' + Date.now()
                    };
                    
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                    updateAuthUI();
                    updateDashboard();
                    showMessage('Login successful!', 'success');
                    showPage('dashboard');
                } else {
                    showMessage('Invalid credentials', 'error');
                }
                hideLoading(form);
            }, 1500);
        }

        function handleRegister(event) {
            event.preventDefault();
            const form = event.target;
            const name = form.querySelector('#register-name').value;
            const email = form.querySelector('#register-email').value;
            const password = form.querySelector('#register-password').value;
            const confirm = form.querySelector('#register-confirm').value;

            if (password !== confirm) {
                showMessage('Passwords do not match', 'error');
                return;
            }

            showLoading(form);

            // Simulate API call
            setTimeout(() => {
                currentUser = {
                    id: email.replace(/[^a-zA-Z0-9]/g, ''), // Simple ID generation
                    name: name,
                    email: email,
                    token: 'jwt-token-' + Date.now()
                };
                
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                updateAuthUI();
                updateDashboard();
                showMessage('Account created successfully!', 'success');
                showPage('dashboard');
                hideLoading(form);
            }, 1500);
        }

        function logout() {
            currentUser = null;
            localStorage.removeItem('currentUser');
            updateAuthUI();
            showMessage('Logged out successfully', 'success');
            showPage('home');
        }

        function updateAuthUI() {
            const authButtons = document.getElementById('auth-buttons');
            const userMenu = document.getElementById('user-menu');
            const userName = document.getElementById('user-name');

            if (currentUser) {
                authButtons.classList.add('hidden');
                userMenu.classList.remove('hidden');
                userName.textContent = currentUser.name;
            } else {
                authButtons.classList.remove('hidden');
                userMenu.classList.add('hidden');
            }
        }

        // Cart Management
        function addToCart(courseId) {
            const course = courses.find(c => c.id === courseId);
            if (course && !cart.find(item => item.id === courseId)) {
                cart.push(course);
                localStorage.setItem('cart', JSON.stringify(cart));
                updateCartUI();
                showMessage(`${course.title} added to cart!`, 'success');
            }
        }

        function removeFromCart(courseId) {
            cart = cart.filter(item => item.id !== courseId);
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartUI();
            showMessage('Item removed from cart', 'success');
        }

        function updateCartUI() {
            const cartCount = document.getElementById('cart-count');
            const cartItems = document.getElementById('cart-items');
            const emptyCart = document.getElementById('empty-cart');
            const cartSubtotal = document.getElementById('cart-subtotal');
            const cartTax = document.getElementById('cart-tax');
            const cartTotal = document.getElementById('cart-total');
            const checkoutBtn = document.getElementById('checkout-btn');

            cartCount.textContent = cart.length;

            if (cart.length === 0) {
                if (cartItems) cartItems.innerHTML = '';
                if (emptyCart) emptyCart.classList.remove('hidden');
                if (checkoutBtn) checkoutBtn.disabled = true;
                if (cartSubtotal) cartSubtotal.textContent = '$0';
                if (cartTax) cartTax.textContent = '$0';
                if (cartTotal) cartTotal.textContent = '$0';
            } else {
                if (emptyCart) emptyCart.classList.add('hidden');
                if (checkoutBtn) checkoutBtn.disabled = false;

                const subtotal = cart.reduce((sum, item) => sum + item.price, 0);
                const tax = subtotal * 0.1;
                const total = subtotal + tax;

                if (cartSubtotal) cartSubtotal.textContent = `$${subtotal}`;
                if (cartTax) cartTax.textContent = `$${tax.toFixed(2)}`;
                if (cartTotal) cartTotal.textContent = `$${total.toFixed(2)}`;

                if (cartItems) {
                    cartItems.innerHTML = cart.map(item => `
                        <div class="bg-white dark:bg-gray-800 p-4 rounded-lg shadow transition-colors">
                            <div class="flex items-center space-x-4">
                                <div class="w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center">
                                    <span class="text-2xl">${item.image}</span>
                                </div>
                                <div class="flex-1">
                                    <h3 class="font-semibold text-gray-900 dark:text-white">${item.title}</h3>
                                    <p class="text-gray-600 dark:text-gray-400">Online Course</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-lg font-bold text-primary-600 dark:text-primary-400">$${item.price}</p>
                                    <button onclick="removeFromCart(${item.id})" class="text-red-600 hover:text-red-700 text-sm transition-colors">
                                        Remove
                                    </button>
                                </div>
                            </div>
                        </div>
                    `).join('');
                }
            }
        }

        function checkout() {
            if (!currentUser) {
                showMessage('Please login to checkout', 'error');
                showPage('login');
                return;
            }

            if (cart.length === 0) {
                showMessage('Your cart is empty', 'error');
                return;
            }

            // Simulate checkout process
            showMessage('Processing order...', 'info');
            
            setTimeout(() => {
                // Enroll user in purchased courses
                cart.forEach(course => {
                    userDataManager.enrollUserInCourse(course.id);
                });

                // Clear cart
                cart = [];
                localStorage.setItem('cart', JSON.stringify(cart));
                updateCartUI();
                updateDashboard();

                showMessage('üéâ Order placed successfully! You are now enrolled in your courses!', 'success');
                showPage('dashboard');
            }, 2000);
        }

        // Video Player
        function setupVideoPlayer() {
            const video = document.getElementById('course-video');
            const canvas = document.getElementById('video-overlay');
            const playPauseBtn = document.getElementById('play-pause-btn');
            const progressBar = document.getElementById('progress-bar');
            const timeDisplay = document.getElementById('time-display');
            const volumeControl = document.getElementById('volume-control');

            if (!video) return;

            const ctx = canvas ? canvas.getContext('2d') : null;

            video.addEventListener('loadedmetadata', function() {
                if (canvas) {
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                }
                if (progressBar) progressBar.max = video.duration;
            });

            video.addEventListener('timeupdate', function() {
                if (progressBar) progressBar.value = video.currentTime;
                updateTimeDisplay();
                if (ctx) drawProgressOverlay();
            });

            video.addEventListener('play', function() {
                if (playPauseBtn) playPauseBtn.textContent = '‚è∏Ô∏è';
            });

            video.addEventListener('pause', function() {
                if (playPauseBtn) playPauseBtn.textContent = '‚ñ∂Ô∏è';
            });

            if (progressBar) {
                progressBar.addEventListener('input', function() {
                    video.currentTime = progressBar.value;
                });
            }

            if (volumeControl) {
                volumeControl.addEventListener('input', function() {
                    video.volume = volumeControl.value / 100;
                });
            }

            function updateTimeDisplay() {
                if (!timeDisplay) return;
                const current = formatTime(video.currentTime);
                const duration = formatTime(video.duration);
                timeDisplay.textContent = `${current} / ${duration}`;
            }

            function formatTime(seconds) {
                const mins = Math.floor(seconds / 60);
                const secs = Math.floor(seconds % 60);
                return `${mins}:${secs.toString().padStart(2, '0')}`;
            }

            function drawProgressOverlay() {
                if (!video.duration || !ctx) return;
                
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Draw progress indicator
                const progress = video.currentTime / video.duration;
                const barWidth = canvas.width * 0.8;
                const barHeight = 4;
                const x = (canvas.width - barWidth) / 2;
                const y = canvas.height - 30;

                // Background
                ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
                ctx.fillRect(x, y, barWidth, barHeight);

                // Progress
                ctx.fillStyle = '#3b82f6';
                ctx.fillRect(x, y, barWidth * progress, barHeight);
            }
        }

        function togglePlayPause() {
            const video = document.getElementById('course-video');
            if (video) {
                if (video.paused) {
                    video.play();
                } else {
                    video.pause();
                }
            }
        }

        // Form Validation
        function setupFormValidation() {
            const forms = document.querySelectorAll('form');
            forms.forEach(form => {
                const inputs = form.querySelectorAll('input');
                inputs.forEach(input => {
                    input.addEventListener('input', validateInput);
                    input.addEventListener('invalid', showValidationError);
                });
            });

            // Password confirmation validation
            const confirmInput = document.getElementById('register-confirm');
            if (confirmInput) {
                confirmInput.addEventListener('input', function() {
                    const password = document.getElementById('register-password').value;
                    const confirm = this.value;
                    
                    if (confirm && password !== confirm) {
                        this.setCustomValidity('Passwords do not match');
                        showInputError(this, 'Passwords do not match');
                    } else {
                        this.setCustomValidity('');
                        hideInputError(this);
                    }
                });
            }
        }

        function validateInput(event) {
            const input = event.target;
            if (input.validity.valid) {
                hideInputError(input);
            } else {
                showValidationError(event);
            }
        }

        function showValidationError(event) {
            const input = event.target;
            let message = '';

            if (input.validity.valueMissing) {
                message = 'This field is required';
            } else if (input.validity.typeMismatch) {
                message = 'Please enter a valid ' + input.type;
            } else if (input.validity.tooShort) {
                message = `Minimum ${input.minLength} characters required`;
            } else if (input.validity.patternMismatch) {
                message = 'Please match the required format';
            }

            showInputError(input, message);
        }

        function showInputError(input, message) {
            input.classList.add('border-red-500');
            const errorDiv = input.parentNode.querySelector('.error-message');
            if (errorDiv) {
                errorDiv.textContent = message;
                errorDiv.classList.remove('hidden');
            }
        }

        function hideInputError(input) {
            input.classList.remove('border-red-500');
            const errorDiv = input.parentNode.querySelector('.error-message');
            if (errorDiv) {
                errorDiv.classList.add('hidden');
            }
        }

        // Utility Functions
        function showLoading(form) {
            const button = form.querySelector('button[type="submit"]');
            const buttonText = button.querySelector('.button-text');
            const spinner = button.querySelector('.loading-spinner');
            
            buttonText.textContent = 'Processing...';
            spinner.classList.remove('hidden');
            button.disabled = true;
        }

        function hideLoading(form) {
            const button = form.querySelector('button[type="submit"]');
            const buttonText = button.querySelector('.button-text');
            const spinner = button.querySelector('.loading-spinner');
            
            buttonText.textContent = form.id === 'login-form' ? 'Login' : 'Create Account';
            spinner.classList.add('hidden');
            button.disabled = false;
        }

        function showMessage(message, type = 'info') {
            const container = document.getElementById('message-container');
            const messageDiv = document.createElement('div');
            
            const bgColor = {
                success: 'bg-green-500',
                error: 'bg-red-500',
                info: 'bg-blue-500'
            }[type];

            messageDiv.className = `${bgColor} text-white px-6 py-3 rounded-lg shadow-lg mb-4 fade-in`;
            messageDiv.textContent = message;
            
            container.appendChild(messageDiv);
            
            setTimeout(() => {
                messageDiv.remove();
            }, 5000);
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97851cb6733d0333',t:'MTc1NjczMzMyMS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
