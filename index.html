<!DOCTYPE html>
<html lang="en" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduStream - Educational Media Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#eff6ff',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8'
                        }
                    }
                }
            }
        }
    </script>
    <style>
        .video-overlay {
            position: absolute;
            top: 0;
            left: 0;
            pointer-events: none;
        }
        .progress-ring {
            transform: rotate(-90deg);
        }
        .progress-ring-circle {
            transition: stroke-dashoffset 0.35s;
            transform-origin: 50% 50%;
        }
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 transition-colors duration-300">
    <!-- Navigation -->
    <nav class="bg-white dark:bg-gray-900 shadow-sm border-b border-gray-200 dark:border-gray-700 transition-all duration-300 sticky top-0 z-50 backdrop-blur-sm bg-white/95 dark:bg-gray-900/95">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo Section -->
                <div class="flex items-center space-x-8">
                    <div class="flex-shrink-0 flex items-center space-x-3">
                        <div class="w-10 h-10 bg-gradient-to-br from-primary-500 to-primary-700 rounded-xl flex items-center justify-center shadow-lg">
                            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"/>
                            </svg>
                        </div>
                        <div>
                            <h1 class="text-xl font-bold text-gray-900 dark:text-white">EduStream</h1>
                            <p class="text-xs text-gray-500 dark:text-gray-400 -mt-1">Learn & Grow</p>
                        </div>
                    </div>
                    
                    <!-- Desktop Navigation -->
                    <div class="hidden lg:flex items-center space-x-1">
                        <a href="#" onclick="showPage('home')" class="nav-link group flex items-center px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg transition-all duration-200">
                            <svg class="w-4 h-4 mr-2 group-hover:scale-110 transition-transform" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"/>
                            </svg>
                            Home
                        </a>
                        <a href="#" onclick="showPage('courses')" class="nav-link group flex items-center px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg transition-all duration-200">
                            <svg class="w-4 h-4 mr-2 group-hover:scale-110 transition-transform" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            Courses
                        </a>
                        <a href="#" onclick="showPage('dashboard')" class="nav-link group flex items-center px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg transition-all duration-200">
                            <svg class="w-4 h-4 mr-2 group-hover:scale-110 transition-transform" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>
                            </svg>
                            Dashboard
                        </a>
                        <a href="#" onclick="showPage('feedback')" class="nav-link group flex items-center px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg transition-all duration-200">
                            <svg class="w-4 h-4 mr-2 group-hover:scale-110 transition-transform" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"/>
                            </svg>
                            Feedback
                        </a>
                    </div>
                </div>

                <!-- Right Section -->
                <div class="flex items-center space-x-3">
                    <!-- Search Bar (Desktop) -->
                    <div class="hidden md:flex items-center">
                        <div class="relative">
                            <input type="text" placeholder="Search courses..." class="w-64 pl-10 pr-4 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all">
                            <svg class="absolute left-3 top-2.5 w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"/>
                            </svg>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex items-center space-x-2">
                        <!-- Dark Mode Toggle -->
                        <button onclick="toggleDarkMode()" class="p-2.5 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-all duration-200 group">
                            <svg class="w-5 h-5 text-gray-600 dark:text-gray-300 group-hover:scale-110 transition-transform dark-mode-icon hidden dark:block" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" clip-rule="evenodd"/>
                            </svg>
                            <svg class="w-5 h-5 text-gray-600 dark:text-gray-300 group-hover:scale-110 transition-transform light-mode-icon block dark:hidden" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"/>
                            </svg>
                        </button>

                        <!-- Notifications -->
                        <button class="relative p-2.5 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-all duration-200 group">
                            <svg class="w-5 h-5 text-gray-600 dark:text-gray-300 group-hover:scale-110 transition-transform" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"/>
                            </svg>
                            <span class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full"></span>
                        </button>

                        <!-- Cart -->
                        <button onclick="showPage('cart')" class="relative p-2.5 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-all duration-200 group">
                            <svg class="w-5 h-5 text-gray-600 dark:text-gray-300 group-hover:scale-110 transition-transform" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"/>
                            </svg>
                            <span id="cart-count" class="absolute -top-1 -right-1 bg-primary-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium">0</span>
                        </button>
                    </div>

                    <!-- Auth Section - Desktop -->
                    <div class="hidden lg:flex items-center space-x-3 ml-4 pl-4 border-l border-gray-200 dark:border-gray-700">
                        <div id="auth-buttons" class="flex items-center space-x-3">
                            <button onclick="showPage('login')" class="px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors">
                                Sign In
                            </button>
                            <button onclick="showPage('register')" class="px-4 py-2 text-sm font-medium bg-primary-600 text-white rounded-lg hover:bg-primary-700 shadow-sm hover:shadow-md transition-all duration-200">
                                Get Started
                            </button>
                        </div>
                        <div id="user-menu" class="hidden flex items-center space-x-3">
                            <div class="flex items-center space-x-3">
                                <div class="w-8 h-8 bg-primary-100 dark:bg-primary-900 rounded-full flex items-center justify-center">
                                    <span class="text-sm font-medium text-primary-600 dark:text-primary-400" id="user-avatar">U</span>
                                </div>
                                <div class="hidden xl:block">
                                    <p class="text-sm font-medium text-gray-900 dark:text-white" id="user-name"></p>
                                    <p class="text-xs text-gray-500 dark:text-gray-400">Student</p>
                                </div>
                            </div>
                            <div class="relative">
                                <button onclick="toggleUserDropdown()" class="p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors">
                                    <svg class="w-4 h-4 text-gray-500" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"/>
                                    </svg>
                                </button>
                                <div id="user-dropdown" class="hidden absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-1 z-50">
                                    <a href="#" onclick="showPage('dashboard')" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700">My Dashboard</a>
                                    <a href="#" onclick="showPage('settings')" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700">Settings</a>
                                    <hr class="my-1 border-gray-200 dark:border-gray-700">
                                    <button onclick="logout()" class="w-full text-left px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-gray-50 dark:hover:bg-gray-700">Sign Out</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Mobile menu button -->
                    <button onclick="toggleMobileMenu()" class="lg:hidden p-2.5 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-all duration-200">
                        <svg id="mobile-menu-icon-open" class="w-5 h-5 text-gray-600 dark:text-gray-300" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"/>
                        </svg>
                        <svg id="mobile-menu-icon-close" class="hidden w-5 h-5 text-gray-600 dark:text-gray-300" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Mobile menu -->
        <div id="mobile-menu" class="hidden lg:hidden bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 shadow-lg">
            <div class="px-4 py-6 space-y-4">
                <!-- Mobile Search -->
                <div class="relative">
                    <input type="text" placeholder="Search courses..." class="w-full pl-10 pr-4 py-3 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent">
                    <svg class="absolute left-3 top-3.5 w-4 h-4 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"/>
                    </svg>
                </div>

                <!-- Mobile Navigation Links -->
                <div class="space-y-2">
                    <a href="#" onclick="showPage('home'); closeMobileMenu()" class="mobile-nav-link flex items-center px-4 py-3 text-base font-medium text-gray-900 dark:text-gray-100 hover:text-primary-600 dark:hover:text-primary-400 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg transition-all">
                        <svg class="w-5 h-5 mr-3" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"/>
                        </svg>
                        Home
                    </a>
                    <a href="#" onclick="showPage('courses'); closeMobileMenu()" class="mobile-nav-link flex items-center px-4 py-3 text-base font-medium text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg transition-all">
                        <svg class="w-5 h-5 mr-3" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        Courses
                    </a>
                    <a href="#" onclick="showPage('dashboard'); closeMobileMenu()" class="mobile-nav-link flex items-center px-4 py-3 text-base font-medium text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg transition-all">
                        <svg class="w-5 h-5 mr-3" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>
                        </svg>
                        Dashboard
                    </a>
                    <a href="#" onclick="showPage('feedback'); closeMobileMenu()" class="mobile-nav-link flex items-center px-4 py-3 text-base font-medium text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg transition-all">
                        <svg class="w-5 h-5 mr-3" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"/>
                        </svg>
                        Feedback
                    </a>
                </div>
                
                <!-- Mobile Auth Section -->
                <div class="border-t border-gray-200 dark:border-gray-700 pt-4 mt-4">
                    <div id="mobile-auth-buttons" class="space-y-3">
                        <button onclick="showPage('login'); closeMobileMenu()" class="w-full flex items-center justify-center px-4 py-3 text-base font-medium text-primary-600 dark:text-primary-400 border border-primary-600 dark:border-primary-400 rounded-lg hover:bg-primary-50 dark:hover:bg-primary-900/20 transition-all">
                            Sign In
                        </button>
                        <button onclick="showPage('register'); closeMobileMenu()" class="w-full flex items-center justify-center px-4 py-3 text-base font-medium bg-primary-600 text-white rounded-lg hover:bg-primary-700 shadow-sm transition-all">
                            Get Started
                        </button>
                    </div>
                    <div id="mobile-user-menu" class="hidden space-y-3">
                        <div class="flex items-center space-x-3 px-4 py-3 bg-gray-50 dark:bg-gray-800 rounded-lg">
                            <div class="w-10 h-10 bg-primary-100 dark:bg-primary-900 rounded-full flex items-center justify-center">
                                <span class="text-sm font-medium text-primary-600 dark:text-primary-400" id="mobile-user-avatar">U</span>
                            </div>
                            <div>
                                <p class="text-base font-medium text-gray-900 dark:text-white" id="mobile-user-name"></p>
                                <p class="text-sm text-gray-500 dark:text-gray-400">Student</p>
                            </div>
                        </div>
                        <button onclick="showPage('settings'); closeMobileMenu()" class="w-full text-left px-4 py-3 text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg transition-all">
                            Settings
                        </button>
                        <button onclick="logout(); closeMobileMenu()" class="w-full text-left px-4 py-3 text-base font-medium text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-all">
                            Sign Out
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-8">
        <!-- Home Page -->
        <div id="home-page" class="page-content">
            <div class="text-center mb-12 fade-in">
                <h1 class="text-4xl font-bold text-gray-900 dark:text-white mb-4">Learn Anything, Anywhere</h1>
                <p class="text-xl text-gray-600 dark:text-gray-300 mb-8">Join thousands of students in our interactive learning platform</p>
                <button onclick="showPage('courses')" class="bg-primary-600 hover:bg-primary-700 text-white font-bold py-3 px-8 rounded-lg text-lg transition-colors">
                    Explore Courses
                </button>
            </div>

            <!-- Featured Courses -->
            <div class="grid md:grid-cols-3 gap-8 mb-12">
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden transition-colors fade-in">
                    <div class="h-48 bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center">
                        <span class="text-6xl">🎨</span>
                    </div>
                    <div class="p-6">
                        <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-2">Web Design Fundamentals</h3>
                        <p class="text-gray-600 dark:text-gray-300 mb-4">Learn the basics of modern web design with hands-on projects</p>
                        <div class="flex justify-between items-center">
                            <span class="text-2xl font-bold text-primary-600 dark:text-primary-400">$49</span>
                            <button onclick="addToCart(1)" class="bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg transition-colors">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                </div>

                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden transition-colors fade-in">
                    <div class="h-48 bg-gradient-to-r from-green-500 to-blue-600 flex items-center justify-center">
                        <span class="text-6xl">💻</span>
                    </div>
                    <div class="p-6">
                        <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-2">JavaScript Mastery</h3>
                        <p class="text-gray-600 dark:text-gray-300 mb-4">Master JavaScript from basics to advanced concepts</p>
                        <div class="flex justify-between items-center">
                            <span class="text-2xl font-bold text-primary-600 dark:text-primary-400">$79</span>
                            <button onclick="addToCart(2)" class="bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg transition-colors">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                </div>

                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden transition-colors fade-in">
                    <div class="h-48 bg-gradient-to-r from-purple-500 to-pink-600 flex items-center justify-center">
                        <span class="text-6xl">📊</span>
                    </div>
                    <div class="p-6">
                        <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-2">Data Science Basics</h3>
                        <p class="text-gray-600 dark:text-gray-300 mb-4">Introduction to data analysis and visualization</p>
                        <div class="flex justify-between items-center">
                            <span class="text-2xl font-bold text-primary-600 dark:text-primary-400">$99</span>
                            <button onclick="addToCart(3)" class="bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg transition-colors">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Login Page -->
        <div id="login-page" class="page-content hidden">
            <div class="max-w-md mx-auto bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 transition-colors fade-in">
                <h2 class="text-2xl font-bold text-center text-gray-900 dark:text-white mb-8">Login to EduStream</h2>
                <form id="login-form" onsubmit="handleLogin(event)">
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Email</label>
                        <input type="email" id="login-email" required 
                               class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 dark:bg-gray-700 dark:text-white transition-colors"
                               placeholder="Enter your email">
                        <div class="error-message text-red-500 text-sm mt-1 hidden"></div>
                    </div>
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Password</label>
                        <input type="password" id="login-password" required minlength="6"
                               class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 dark:bg-gray-700 dark:text-white transition-colors"
                               placeholder="Enter your password">
                        <div class="error-message text-red-500 text-sm mt-1 hidden"></div>
                    </div>
                    <button type="submit" class="w-full bg-primary-600 hover:bg-primary-700 text-white font-bold py-3 px-4 rounded-lg transition-colors flex items-center justify-center">
                        <span class="button-text">Login</span>
                        <div class="loading-spinner hidden ml-2"></div>
                    </button>
                </form>
                <p class="text-center text-gray-600 dark:text-gray-400 mt-4">
                    Don't have an account? 
                    <a href="#" onclick="showPage('register')" class="text-primary-600 dark:text-primary-400 hover:underline">Register here</a>
                </p>
            </div>
        </div>

        <!-- Register Page -->
        <div id="register-page" class="page-content hidden">
            <div class="max-w-md mx-auto bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 transition-colors fade-in">
                <h2 class="text-2xl font-bold text-center text-gray-900 dark:text-white mb-8">Join EduStream</h2>
                <form id="register-form" onsubmit="handleRegister(event)">
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Full Name</label>
                        <input type="text" id="register-name" required minlength="2"
                               class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 dark:bg-gray-700 dark:text-white transition-colors"
                               placeholder="Enter your full name">
                        <div class="error-message text-red-500 text-sm mt-1 hidden"></div>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Email</label>
                        <input type="email" id="register-email" required
                               class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 dark:bg-gray-700 dark:text-white transition-colors"
                               placeholder="Enter your email">
                        <div class="error-message text-red-500 text-sm mt-1 hidden"></div>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Password</label>
                        <input type="password" id="register-password" required minlength="8" 
                               pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$"
                               class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 dark:bg-gray-700 dark:text-white transition-colors"
                               placeholder="Enter your password">
                        <div class="error-message text-red-500 text-sm mt-1 hidden"></div>
                        <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Must contain uppercase, lowercase, number, and be 8+ characters</p>
                    </div>
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Confirm Password</label>
                        <input type="password" id="register-confirm" required
                               class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 dark:bg-gray-700 dark:text-white transition-colors"
                               placeholder="Confirm your password">
                        <div class="error-message text-red-500 text-sm mt-1 hidden"></div>
                    </div>
                    <button type="submit" class="w-full bg-primary-600 hover:bg-primary-700 text-white font-bold py-3 px-4 rounded-lg transition-colors flex items-center justify-center">
                        <span class="button-text">Create Account</span>
                        <div class="loading-spinner hidden ml-2"></div>
                    </button>
                </form>
                <p class="text-center text-gray-600 dark:text-gray-400 mt-4">
                    Already have an account? 
                    <a href="#" onclick="showPage('login')" class="text-primary-600 dark:text-primary-400 hover:underline">Login here</a>
                </p>
            </div>
        </div>

        <!-- Courses Page -->
        <div id="courses-page" class="page-content hidden">
            <div class="fade-in">
                <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-8">All Courses</h1>
                
                <!-- Course Categories -->
                <div class="mb-8">
                    <div class="flex flex-wrap gap-4">
                        <button onclick="filterCourses('all')" class="category-btn active bg-primary-600 text-white px-4 py-2 rounded-lg transition-colors">All Courses</button>
                        <button onclick="filterCourses('web-development')" class="category-btn bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">Web Development</button>
                        <button onclick="filterCourses('data-science')" class="category-btn bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">Data Science</button>
                        <button onclick="filterCourses('design')" class="category-btn bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">Design</button>
                        <button onclick="filterCourses('business')" class="category-btn bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">Business</button>
                        <button onclick="filterCourses('mobile')" class="category-btn bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">Mobile Development</button>
                    </div>
                </div>

                <!-- Course Grid -->
                <div id="courses-grid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Courses will be populated here -->
                </div>
            </div>
        </div>

        <!-- Course Detail Page -->
        <div id="course-page" class="page-content hidden">
            <div class="fade-in">
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden transition-colors">
                    <div class="p-8">
                        <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-4">JavaScript Mastery Course</h1>
                        <p class="text-gray-600 dark:text-gray-300 mb-8">Master JavaScript from basics to advanced concepts with interactive lessons and projects.</p>
                        
                        <!-- Video Player Section -->
                        <div class="relative mb-8">
                            <div class="relative bg-black rounded-lg overflow-hidden">
                                <video id="course-video" class="w-full h-64 md:h-96" controls>
                                    <source src="https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4" type="video/mp4">
                                    <source src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4" type="video/mp4">
                                    Your browser does not support the video tag.
                                </video>
                                <canvas id="video-overlay" class="video-overlay w-full h-64 md:h-96"></canvas>
                            </div>
                            
                            <!-- Custom Controls -->
                            <div class="bg-gray-100 dark:bg-gray-700 p-4 rounded-b-lg transition-colors">
                                <div class="flex items-center space-x-4">
                                    <button id="play-pause-btn" onclick="togglePlayPause()" class="bg-primary-600 hover:bg-primary-700 text-white p-2 rounded-full transition-colors">
                                        ▶️
                                    </button>
                                    <div class="flex-1">
                                        <input type="range" id="progress-bar" class="w-full" min="0" max="100" value="0">
                                    </div>
                                    <span id="time-display" class="text-sm text-gray-600 dark:text-gray-300">0:00 / 0:00</span>
                                    <input type="range" id="volume-control" class="w-20" min="0" max="100" value="100">
                                    <span class="text-sm">🔊</span>
                                </div>
                            </div>
                        </div>

                        <!-- Course Content -->
                        <div class="grid md:grid-cols-3 gap-8">
                            <div class="md:col-span-2">
                                <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">Course Content</h3>
                                <div class="space-y-4">
                                    <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg transition-colors">
                                        <h4 class="font-medium text-gray-900 dark:text-white">1. Introduction to JavaScript</h4>
                                        <p class="text-sm text-gray-600 dark:text-gray-300">Learn the basics and setup your development environment</p>
                                    </div>
                                    <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg transition-colors">
                                        <h4 class="font-medium text-gray-900 dark:text-white">2. Variables and Data Types</h4>
                                        <p class="text-sm text-gray-600 dark:text-gray-300">Understanding different data types and variable declarations</p>
                                    </div>
                                    <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg transition-colors">
                                        <h4 class="font-medium text-gray-900 dark:text-white">3. Functions and Scope</h4>
                                        <p class="text-sm text-gray-600 dark:text-gray-300">Master functions, closures, and scope in JavaScript</p>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <div class="bg-gray-50 dark:bg-gray-700 p-6 rounded-lg transition-colors">
                                    <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">Course Details</h3>
                                    <div class="space-y-3 text-sm">
                                        <div class="flex justify-between">
                                            <span class="text-gray-600 dark:text-gray-300">Duration:</span>
                                            <span class="text-gray-900 dark:text-white">12 hours</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-gray-600 dark:text-gray-300">Lessons:</span>
                                            <span class="text-gray-900 dark:text-white">24</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-gray-600 dark:text-gray-300">Level:</span>
                                            <span class="text-gray-900 dark:text-white">Beginner</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span class="text-gray-600 dark:text-gray-300">Price:</span>
                                            <span class="text-2xl font-bold text-primary-600 dark:text-primary-400">$79</span>
                                        </div>
                                    </div>
                                    <button onclick="addToCart(2)" class="w-full mt-6 bg-primary-600 hover:bg-primary-700 text-white font-bold py-3 px-4 rounded-lg transition-colors">
                                        Add to Cart
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Dashboard Page -->
        <div id="dashboard-page" class="page-content hidden">
            <div class="fade-in">
                <div class="flex justify-between items-center mb-8">
                    <h1 class="text-3xl font-bold text-gray-900 dark:text-white">Learning Dashboard</h1>
                    <div class="flex items-center space-x-4">
                        <div class="text-sm text-gray-600 dark:text-gray-400">
                            Last updated: <span id="last-updated" class="font-medium"></span>
                        </div>
                        <button onclick="refreshDashboard()" class="bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg text-sm transition-colors">
                            🔄 Refresh
                        </button>
                    </div>
                </div>
                
                <!-- Stats Overview -->
                <div class="grid md:grid-cols-4 gap-6 mb-8">
                    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg transition-colors">
                        <div class="flex items-center">
                            <div class="p-3 bg-blue-100 dark:bg-blue-900 rounded-full">
                                <span class="text-2xl">📚</span>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm text-gray-600 dark:text-gray-400">Courses Enrolled</p>
                                <p id="enrolled-count" class="text-2xl font-bold text-gray-900 dark:text-white">0</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg transition-colors">
                        <div class="flex items-center">
                            <div class="p-3 bg-green-100 dark:bg-green-900 rounded-full">
                                <span class="text-2xl">✅</span>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm text-gray-600 dark:text-gray-400">Completed</p>
                                <p id="completed-count" class="text-2xl font-bold text-gray-900 dark:text-white">0</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg transition-colors">
                        <div class="flex items-center">
                            <div class="p-3 bg-yellow-100 dark:bg-yellow-900 rounded-full">
                                <span class="text-2xl">⏱️</span>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm text-gray-600 dark:text-gray-400">Hours Learned</p>
                                <p id="hours-learned" class="text-2xl font-bold text-gray-900 dark:text-white">0</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg transition-colors">
                        <div class="flex items-center">
                            <div class="p-3 bg-purple-100 dark:bg-purple-900 rounded-full">
                                <span class="text-2xl">🏆</span>
                            </div>
                            <div class="ml-4">
                                <p class="text-sm text-gray-600 dark:text-gray-400">Certificates</p>
                                <p id="certificates-count" class="text-2xl font-bold text-gray-900 dark:text-white">0</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Course Progress -->
                <div class="grid md:grid-cols-2 gap-8 mb-8">
                    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg transition-colors">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-xl font-semibold text-gray-900 dark:text-white">My Courses</h3>
                            <button onclick="simulateProgress()" class="text-sm text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 transition-colors">
                                📈 Simulate Progress
                            </button>
                        </div>
                        <div id="enrolled-courses" class="space-y-4">
                            <div class="text-center py-8 text-gray-500 dark:text-gray-400">
                                <span class="text-4xl block mb-2">📚</span>
                                <p>No courses enrolled yet</p>
                                <button onclick="showPage('courses')" class="mt-4 text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 transition-colors">
                                    Browse Courses
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Learning Analytics -->
                    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg transition-colors">
                        <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-6">Learning Analytics</h3>
                        <div class="space-y-4">
                            <div class="flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                <div class="flex items-center space-x-3">
                                    <span class="text-2xl">📅</span>
                                    <span class="text-sm font-medium text-gray-700 dark:text-gray-300">This Week</span>
                                </div>
                                <span id="weekly-hours" class="text-lg font-bold text-primary-600 dark:text-primary-400">0h</span>
                            </div>
                            <div class="flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                <div class="flex items-center space-x-3">
                                    <span class="text-2xl">🎯</span>
                                    <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Avg. Session</span>
                                </div>
                                <span id="avg-session" class="text-lg font-bold text-primary-600 dark:text-primary-400">0m</span>
                            </div>
                            <div class="flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                <div class="flex items-center space-x-3">
                                    <span class="text-2xl">🔥</span>
                                    <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Current Streak</span>
                                </div>
                                <span id="current-streak" class="text-lg font-bold text-primary-600 dark:text-primary-400">0 days</span>
                            </div>
                            <div class="flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                <div class="flex items-center space-x-3">
                                    <span class="text-2xl">📊</span>
                                    <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Completion Rate</span>
                                </div>
                                <span id="completion-rate" class="text-lg font-bold text-primary-600 dark:text-primary-400">0%</span>
                            </div>
                            <div class="flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                <div class="flex items-center space-x-3">
                                    <span class="text-2xl">⭐</span>
                                    <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Favorite Category</span>
                                </div>
                                <span id="favorite-category" class="text-lg font-bold text-primary-600 dark:text-primary-400">None</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg transition-colors">
                    <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-6">Recent Activity</h3>
                    <div id="recent-activity" class="space-y-4">
                        <div class="text-center py-8 text-gray-500 dark:text-gray-400">
                            <span class="text-4xl block mb-2">📝</span>
                            <p>No recent activity</p>
                        </div>
                    </div>
                </div>

                <!-- Achievement System -->
                <div class="mt-8 bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg transition-colors">
                    <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-6">Achievements</h3>
                    <div id="achievements" class="grid md:grid-cols-3 gap-4">
                        <!-- Achievements will be populated here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Cart Page -->
        <div id="cart-page" class="page-content hidden">
            <div class="fade-in">
                <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-8">Shopping Cart</h1>
                
                <div class="grid md:grid-cols-3 gap-8">
                    <div class="md:col-span-2">
                        <div id="cart-items" class="space-y-4">
                            <!-- Cart items will be populated here -->
                        </div>
                        <div id="empty-cart" class="text-center py-12 hidden">
                            <span class="text-6xl mb-4 block">🛒</span>
                            <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-2">Your cart is empty</h3>
                            <p class="text-gray-600 dark:text-gray-400 mb-6">Add some courses to get started!</p>
                            <button onclick="showPage('home')" class="bg-primary-600 hover:bg-primary-700 text-white px-6 py-3 rounded-lg transition-colors">
                                Browse Courses
                            </button>
                        </div>
                    </div>
                    
                    <div>
                        <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg transition-colors">
                            <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">Order Summary</h3>
                            <div class="space-y-3">
                                <div class="flex justify-between">
                                    <span class="text-gray-600 dark:text-gray-300">Subtotal:</span>
                                    <span id="cart-subtotal" class="text-gray-900 dark:text-white font-medium">$0</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-600 dark:text-gray-300">Tax:</span>
                                    <span id="cart-tax" class="text-gray-900 dark:text-white font-medium">$0</span>
                                </div>
                                <hr class="border-gray-200 dark:border-gray-600">
                                <div class="flex justify-between">
                                    <span class="text-lg font-semibold text-gray-900 dark:text-white">Total:</span>
                                    <span id="cart-total" class="text-lg font-bold text-primary-600 dark:text-primary-400">$0</span>
                                </div>
                            </div>
                            <button id="checkout-btn" onclick="checkout()" class="w-full mt-6 bg-primary-600 hover:bg-primary-700 text-white font-bold py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                                Proceed to Checkout
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Feedback Page -->
        <div id="feedback-page" class="page-content hidden">
            <div class="fade-in">
                <div class="max-w-6xl mx-auto">
                    <h1 class="text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white mb-8">Student Feedback</h1>
                    
                    <div class="grid lg:grid-cols-2 gap-6 lg:gap-8">
                        <!-- Feedback Form -->
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 sm:p-6 transition-colors">
                            <h2 class="text-xl font-semibold text-gray-900 dark:text-white mb-6">Share Your Feedback</h2>
                            
                            <form id="feedback-form" onsubmit="submitFeedback(event)" class="space-y-4 sm:space-y-6">
                                <!-- Course Selection -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Course (Optional)</label>
                                    <select id="feedback-course" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 dark:bg-gray-700 dark:text-white transition-colors">
                                        <option value="">Select a course or leave blank for general feedback</option>
                                    </select>
                                </div>

                                <!-- Rating -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Overall Rating</label>
                                    <div class="flex items-center space-x-1" id="star-rating">
                                        <button type="button" onclick="setRating(1)" class="star-btn text-2xl text-gray-300 hover:text-yellow-400 transition-colors">⭐</button>
                                        <button type="button" onclick="setRating(2)" class="star-btn text-2xl text-gray-300 hover:text-yellow-400 transition-colors">⭐</button>
                                        <button type="button" onclick="setRating(3)" class="star-btn text-2xl text-gray-300 hover:text-yellow-400 transition-colors">⭐</button>
                                        <button type="button" onclick="setRating(4)" class="star-btn text-2xl text-gray-300 hover:text-yellow-400 transition-colors">⭐</button>
                                        <button type="button" onclick="setRating(5)" class="star-btn text-2xl text-gray-300 hover:text-yellow-400 transition-colors">⭐</button>
                                        <span id="rating-text" class="ml-2 text-sm text-gray-600 dark:text-gray-400">Click to rate</span>
                                    </div>
                                    <input type="hidden" id="rating-value" value="0">
                                </div>

                                <!-- Feedback Category -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Feedback Type</label>
                                    <div class="grid grid-cols-2 sm:grid-cols-4 gap-2">
                                        <label class="flex items-center">
                                            <input type="radio" name="feedback-type" value="course-content" class="text-primary-600 focus:ring-primary-500">
                                            <span class="ml-2 text-xs sm:text-sm text-gray-700 dark:text-gray-300">Course Content</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="radio" name="feedback-type" value="platform" class="text-primary-600 focus:ring-primary-500">
                                            <span class="ml-2 text-xs sm:text-sm text-gray-700 dark:text-gray-300">Platform</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="radio" name="feedback-type" value="instructor" class="text-primary-600 focus:ring-primary-500">
                                            <span class="ml-2 text-xs sm:text-sm text-gray-700 dark:text-gray-300">Instructor</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="radio" name="feedback-type" value="suggestion" class="text-primary-600 focus:ring-primary-500">
                                            <span class="ml-2 text-xs sm:text-sm text-gray-700 dark:text-gray-300">Suggestion</span>
                                        </label>
                                    </div>
                                </div>

                                <!-- Feedback Message -->
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Your Feedback</label>
                                    <textarea id="feedback-message" required rows="4" 
                                              class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 dark:bg-gray-700 dark:text-white transition-colors resize-none"
                                              placeholder="Share your thoughts, suggestions, or experiences..."></textarea>
                                    <div class="text-xs text-gray-500 dark:text-gray-400 mt-1">
                                        <span id="char-count">0</span>/500 characters
                                    </div>
                                </div>

                                <!-- Anonymous Option -->
                                <div class="flex items-center">
                                    <input type="checkbox" id="anonymous-feedback" class="rounded border-gray-300 text-primary-600 focus:ring-primary-500">
                                    <label for="anonymous-feedback" class="ml-2 text-sm text-gray-700 dark:text-gray-300">Submit anonymously</label>
                                </div>

                                <!-- Submit Button -->
                                <button type="submit" class="w-full bg-primary-600 hover:bg-primary-700 text-white font-bold py-3 px-4 rounded-lg transition-colors flex items-center justify-center">
                                    <span class="button-text">Submit Feedback</span>
                                    <div class="loading-spinner hidden ml-2"></div>
                                </button>
                            </form>
                        </div>

                        <!-- Recent Feedback Display -->
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 sm:p-6 transition-colors">
                            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6">
                                <h2 class="text-xl font-semibold text-gray-900 dark:text-white mb-2 sm:mb-0">Recent Feedback</h2>
                                <div class="flex items-center space-x-2">
                                    <button onclick="filterFeedback('all')" class="feedback-filter-btn active text-xs sm:text-sm px-3 py-1 bg-primary-600 text-white rounded-full transition-colors">All</button>
                                    <button onclick="filterFeedback('5')" class="feedback-filter-btn text-xs sm:text-sm px-3 py-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">5⭐</button>
                                    <button onclick="filterFeedback('4')" class="feedback-filter-btn text-xs sm:text-sm px-3 py-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors">4⭐</button>
                                </div>
                            </div>
                            
                            <div id="feedback-list" class="space-y-4 max-h-96 overflow-y-auto">
                                <!-- Feedback items will be populated here -->
                            </div>
                            
                            <div id="no-feedback" class="text-center py-8 text-gray-500 dark:text-gray-400">
                                <span class="text-4xl block mb-2">💬</span>
                                <p class="text-sm sm:text-base">No feedback yet. Be the first to share your thoughts!</p>
                            </div>
                        </div>
                    </div>

                    <!-- Feedback Statistics -->
                    <div class="mt-6 lg:mt-8 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 sm:p-6 transition-colors">
                        <h2 class="text-xl font-semibold text-gray-900 dark:text-white mb-6">Feedback Overview</h2>
                        
                        <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 sm:gap-6">
                            <div class="text-center">
                                <div class="text-2xl sm:text-3xl font-bold text-primary-600 dark:text-primary-400" id="total-feedback">0</div>
                                <div class="text-xs sm:text-sm text-gray-600 dark:text-gray-400">Total Feedback</div>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl sm:text-3xl font-bold text-yellow-500" id="average-rating">0.0</div>
                                <div class="text-xs sm:text-sm text-gray-600 dark:text-gray-400">Average Rating</div>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl sm:text-3xl font-bold text-green-500" id="positive-feedback">0%</div>
                                <div class="text-xs sm:text-sm text-gray-600 dark:text-gray-400">Positive (4-5⭐)</div>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl sm:text-3xl font-bold text-blue-500" id="response-rate">100%</div>
                                <div class="text-xs sm:text-sm text-gray-600 dark:text-gray-400">Response Rate</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Page -->
        <div id="settings-page" class="page-content hidden">
            <div class="fade-in">
                <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-8">Settings</h1>
                
                <div class="max-w-2xl">
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 transition-colors">
                        <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-6">Preferences</h3>
                        
                        <div class="space-y-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <h4 class="text-lg font-medium text-gray-900 dark:text-white">Dark Mode</h4>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">Toggle between light and dark themes</p>
                                </div>
                                <button onclick="toggleDarkMode()" class="relative inline-flex h-6 w-11 items-center rounded-full bg-gray-200 dark:bg-gray-600 transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2">
                                    <span class="dark-mode-toggle inline-block h-4 w-4 transform rounded-full bg-white transition-transform dark:translate-x-6"></span>
                                </button>
                            </div>
                            
                            <div class="border-t border-gray-200 dark:border-gray-600 pt-6">
                                <h4 class="text-lg font-medium text-gray-900 dark:text-white mb-4">Notifications</h4>
                                <div class="space-y-3">
                                    <label class="flex items-center">
                                        <input type="checkbox" checked class="rounded border-gray-300 text-primary-600 focus:ring-primary-500">
                                        <span class="ml-2 text-sm text-gray-700 dark:text-gray-300">Email notifications for new courses</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" checked class="rounded border-gray-300 text-primary-600 focus:ring-primary-500">
                                        <span class="ml-2 text-sm text-gray-700 dark:text-gray-300">Course completion reminders</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" class="rounded border-gray-300 text-primary-600 focus:ring-primary-500">
                                        <span class="ml-2 text-sm text-gray-700 dark:text-gray-300">Weekly progress reports</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Success/Error Messages -->
    <div id="message-container" class="fixed top-4 right-4 z-50"></div>

    <script>
        // Global State
        let currentUser = null;
        let cart = [];
        let userProgress = {};
        let feedbackData = [];
        let currentRating = 0;

        let courses = [
            { id: 1, title: "Web Design Fundamentals", price: 49, image: "🎨", category: "design", description: "Learn the basics of modern web design with hands-on projects", duration: "8 hours", lessons: 16, level: "Beginner" },
            { id: 2, title: "JavaScript Mastery", price: 79, image: "💻", category: "web-development", description: "Master JavaScript from basics to advanced concepts", duration: "12 hours", lessons: 24, level: "Intermediate" },
            { id: 3, title: "Data Science Basics", price: 99, image: "📊", category: "data-science", description: "Introduction to data analysis and visualization", duration: "15 hours", lessons: 30, level: "Beginner" },
            { id: 4, title: "React Development", price: 89, image: "⚛️", category: "web-development", description: "Build modern web applications with React", duration: "14 hours", lessons: 28, level: "Intermediate" },
            { id: 5, title: "Python for Beginners", price: 69, image: "🐍", category: "web-development", description: "Learn Python programming from scratch", duration: "10 hours", lessons: 20, level: "Beginner" },
            { id: 6, title: "Machine Learning Fundamentals", price: 129, image: "🤖", category: "data-science", description: "Introduction to machine learning algorithms", duration: "18 hours", lessons: 36, level: "Advanced" },
            { id: 7, title: "UI/UX Design Principles", price: 79, image: "🎯", category: "design", description: "Master user interface and experience design", duration: "12 hours", lessons: 24, level: "Intermediate" },
            { id: 8, title: "Digital Marketing Strategy", price: 59, image: "📈", category: "business", description: "Learn effective digital marketing techniques", duration: "8 hours", lessons: 16, level: "Beginner" },
            { id: 9, title: "iOS App Development", price: 109, image: "📱", category: "mobile", description: "Build iOS apps with Swift and SwiftUI", duration: "16 hours", lessons: 32, level: "Intermediate" },
            { id: 10, title: "Android Development", price: 99, image: "🤖", category: "mobile", description: "Create Android apps with Kotlin", duration: "14 hours", lessons: 28, level: "Intermediate" },
            { id: 11, title: "Graphic Design Mastery", price: 69, image: "🎨", category: "design", description: "Professional graphic design techniques", duration: "10 hours", lessons: 20, level: "Beginner" },
            { id: 12, title: "Business Analytics", price: 89, image: "📊", category: "business", description: "Data-driven business decision making", duration: "12 hours", lessons: 24, level: "Intermediate" },
            { id: 13, title: "Node.js Backend Development", price: 95, image: "🟢", category: "web-development", description: "Server-side JavaScript with Node.js", duration: "13 hours", lessons: 26, level: "Intermediate" },
            { id: 14, title: "Deep Learning with TensorFlow", price: 149, image: "🧠", category: "data-science", description: "Advanced neural networks and deep learning", duration: "20 hours", lessons: 40, level: "Advanced" },
            { id: 15, title: "Flutter Cross-Platform Development", price: 119, image: "🦋", category: "mobile", description: "Build apps for iOS and Android with Flutter", duration: "15 hours", lessons: 30, level: "Intermediate" }
        ];

        // Backend-like Data Management
        class UserDataManager {
            constructor() {
                this.storageKey = 'edustream_user_data';
                this.achievements = [
                    { id: 'first_purchase', name: 'First Purchase', description: 'Made your first course purchase', icon: '🛒', unlocked: false },
                    { id: 'course_collector', name: 'Course Collector', description: 'Enrolled in 5 courses', icon: '📚', unlocked: false },
                    { id: 'quick_learner', name: 'Quick Learner', description: 'Completed first course', icon: '⚡', unlocked: false },
                    { id: 'dedicated_student', name: 'Dedicated Student', description: 'Studied for 20+ hours', icon: '🎓', unlocked: false },
                    { id: 'certificate_earner', name: 'Certificate Earner', description: 'Earned 3 certificates', icon: '🏆', unlocked: false },
                    { id: 'streak_master', name: 'Streak Master', description: '7-day learning streak', icon: '🔥', unlocked: false }
                ];
            }

            getUserData() {
                if (!currentUser) return null;
                const data = localStorage.getItem(`${this.storageKey}_${currentUser.id}`);
                return data ? JSON.parse(data) : this.createDefaultUserData();
            }

            createDefaultUserData() {
                return {
                    enrolledCourses: [],
                    completedCourses: [],
                    totalHoursLearned: 0,
                    certificates: [],
                    weeklyHours: [0, 0, 0, 0, 0, 0, 0],
                    recentActivity: [],
                    achievements: [...this.achievements],
                    lastUpdated: new Date().toISOString(),
                    purchaseHistory: [],
                    currentStreak: 0,
                    longestStreak: 0
                };
            }

            saveUserData(data) {
                if (!currentUser) return;
                data.lastUpdated = new Date().toISOString();
                localStorage.setItem(`${this.storageKey}_${currentUser.id}`, JSON.stringify(data));
            }

            enrollUserInCourse(courseId) {
                const userData = this.getUserData();
                const course = courses.find(c => c.id === courseId);
                
                if (!course || userData.enrolledCourses.find(c => c.id === courseId)) {
                    return userData;
                }

                const enrolledCourse = {
                    ...course,
                    enrolledDate: new Date().toISOString(),
                    progress: 0,
                    completedLessons: 0,
                    timeSpent: 0,
                    lastAccessed: new Date().toISOString()
                };

                userData.enrolledCourses.push(enrolledCourse);
                userData.recentActivity.unshift({
                    id: Date.now(),
                    type: 'enrollment',
                    message: `Enrolled in "${course.title}"`,
                    timestamp: new Date().toISOString(),
                    icon: '📚'
                });

                userData.purchaseHistory.push({
                    courseId: courseId,
                    courseName: course.title,
                    price: course.price,
                    purchaseDate: new Date().toISOString()
                });

                // Check achievements
                this.checkAchievements(userData);
                this.saveUserData(userData);
                return userData;
            }

            updateCourseProgress(courseId, progressData) {
                const userData = this.getUserData();
                const courseIndex = userData.enrolledCourses.findIndex(c => c.id === courseId);
                
                if (courseIndex === -1) return userData;

                const course = userData.enrolledCourses[courseIndex];
                course.progress = progressData.progress || course.progress;
                course.completedLessons = progressData.completedLessons || course.completedLessons;
                course.timeSpent = progressData.timeSpent || course.timeSpent;
                course.lastAccessed = new Date().toISOString();

                // Update total hours
                userData.totalHoursLearned += (progressData.timeSpent - course.timeSpent) || 0;

                // Update weekly hours (add to current day)
                const today = new Date().getDay();
                userData.weeklyHours[today] += progressData.sessionTime || 0;

                // Check if course is completed
                if (course.progress >= 100 && !userData.completedCourses.find(c => c.id === courseId)) {
                    userData.completedCourses.push({
                        ...course,
                        completedDate: new Date().toISOString()
                    });

                    userData.certificates.push({
                        courseId: courseId,
                        courseName: course.title,
                        issuedDate: new Date().toISOString(),
                        certificateId: `CERT-${courseId}-${Date.now()}`
                    });

                    userData.recentActivity.unshift({
                        id: Date.now(),
                        type: 'completion',
                        message: `Completed "${course.title}" and earned certificate`,
                        timestamp: new Date().toISOString(),
                        icon: '🏆'
                    });
                }

                // Add recent activity for progress
                if (progressData.sessionTime > 0) {
                    userData.recentActivity.unshift({
                        id: Date.now(),
                        type: 'progress',
                        message: `Studied "${course.title}" for ${Math.round(progressData.sessionTime)} minutes`,
                        timestamp: new Date().toISOString(),
                        icon: '📖'
                    });
                }

                // Limit recent activity to 10 items
                userData.recentActivity = userData.recentActivity.slice(0, 10);

                this.checkAchievements(userData);
                this.saveUserData(userData);
                return userData;
            }

            checkAchievements(userData) {
                // First Purchase
                if (userData.purchaseHistory.length >= 1) {
                    this.unlockAchievement(userData, 'first_purchase');
                }

                // Course Collector
                if (userData.enrolledCourses.length >= 5) {
                    this.unlockAchievement(userData, 'course_collector');
                }

                // Quick Learner
                if (userData.completedCourses.length >= 1) {
                    this.unlockAchievement(userData, 'quick_learner');
                }

                // Dedicated Student
                if (userData.totalHoursLearned >= 20) {
                    this.unlockAchievement(userData, 'dedicated_student');
                }

                // Certificate Earner
                if (userData.certificates.length >= 3) {
                    this.unlockAchievement(userData, 'certificate_earner');
                }

                // Streak Master (simplified - just check if user has been active)
                if (userData.recentActivity.length >= 7) {
                    this.unlockAchievement(userData, 'streak_master');
                }
            }

            unlockAchievement(userData, achievementId) {
                const achievement = userData.achievements.find(a => a.id === achievementId);
                if (achievement && !achievement.unlocked) {
                    achievement.unlocked = true;
                    achievement.unlockedDate = new Date().toISOString();
                    
                    userData.recentActivity.unshift({
                        id: Date.now(),
                        type: 'achievement',
                        message: `Unlocked achievement: "${achievement.name}"`,
                        timestamp: new Date().toISOString(),
                        icon: achievement.icon
                    });

                    // Show achievement notification
                    showMessage(`🎉 Achievement Unlocked: ${achievement.name}!`, 'success');
                }
            }

            simulateProgressUpdate() {
                const userData = this.getUserData();
                if (userData.enrolledCourses.length === 0) return userData;

                // Randomly select a course to update
                const randomCourse = userData.enrolledCourses[Math.floor(Math.random() * userData.enrolledCourses.length)];
                const progressIncrease = Math.random() * 20 + 5; // 5-25% progress
                const timeIncrease = Math.random() * 60 + 15; // 15-75 minutes

                return this.updateCourseProgress(randomCourse.id, {
                    progress: Math.min(100, randomCourse.progress + progressIncrease),
                    completedLessons: Math.min(randomCourse.lessons, randomCourse.completedLessons + Math.floor(progressIncrease / 10)),
                    timeSpent: randomCourse.timeSpent + timeIncrease,
                    sessionTime: timeIncrease
                });
            }
        }

        const userDataManager = new UserDataManager();

        // Initialize App
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            setupFormValidation();
            setupVideoPlayer();
            displayCourses();
            initializeFeedbackPage();
        });

        function initializeApp() {
            // Load theme preference
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.documentElement.classList.add('dark');
            }

            // Load user session
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                updateAuthUI();
                updateDashboard();
            }

            // Load cart
            const savedCart = localStorage.getItem('cart');
            if (savedCart) {
                cart = JSON.parse(savedCart);
                updateCartUI();
            }

            // Update last updated time
            updateLastUpdatedTime();
        }

        function updateLastUpdatedTime() {
            const lastUpdatedElement = document.getElementById('last-updated');
            if (lastUpdatedElement) {
                lastUpdatedElement.textContent = new Date().toLocaleTimeString();
            }
        }

        // Theme Management
        function toggleDarkMode() {
            const html = document.documentElement;
            const isDark = html.classList.contains('dark');
            
            if (isDark) {
                html.classList.remove('dark');
                localStorage.setItem('theme', 'light');
            } else {
                html.classList.add('dark');
                localStorage.setItem('theme', 'dark');
            }
        }

        // Navigation
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page-content').forEach(page => {
                page.classList.add('hidden');
            });
            
            // Show selected page
            const targetPage = document.getElementById(pageId + '-page');
            if (targetPage) {
                targetPage.classList.remove('hidden');
                targetPage.classList.add('fade-in');
            }

            // Update dashboard when showing dashboard page
            if (pageId === 'dashboard' && currentUser) {
                updateDashboard();
            }

            // Update feedback page when showing feedback page
            if (pageId === 'feedback') {
                populateCourseDropdown();
                displayFeedback();
                updateFeedbackStats();
            }

            // Update navigation
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('text-gray-900', 'dark:text-gray-100');
                link.classList.add('text-gray-500', 'dark:text-gray-300');
            });
        }

        // Dashboard Management
        function updateDashboard() {
            if (!currentUser) return;

            const userData = userDataManager.getUserData();
            
            // Update stats
            document.getElementById('enrolled-count').textContent = userData.enrolledCourses.length;
            document.getElementById('completed-count').textContent = userData.completedCourses.length;
            document.getElementById('hours-learned').textContent = Math.round(userData.totalHoursLearned);
            document.getElementById('certificates-count').textContent = userData.certificates.length;

            // Update enrolled courses
            updateEnrolledCourses(userData);
            
            // Update recent activity
            updateRecentActivity(userData);
            
            // Update achievements
            updateAchievements(userData);
            
            // Update analytics
            updateLearningAnalytics(userData);
            
            // Update last updated time
            updateLastUpdatedTime();
        }

        function updateEnrolledCourses(userData) {
            const enrolledCoursesContainer = document.getElementById('enrolled-courses');
            
            if (userData.enrolledCourses.length === 0) {
                enrolledCoursesContainer.innerHTML = `
                    <div class="text-center py-8 text-gray-500 dark:text-gray-400">
                        <span class="text-4xl block mb-2">📚</span>
                        <p>No courses enrolled yet</p>
                        <button onclick="showPage('courses')" class="mt-4 text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 transition-colors">
                            Browse Courses
                        </button>
                    </div>
                `;
                return;
            }

            enrolledCoursesContainer.innerHTML = userData.enrolledCourses.map(course => `
                <div class="border border-gray-200 dark:border-gray-600 rounded-lg p-4 transition-colors">
                    <div class="flex justify-between items-start mb-2">
                        <h4 class="font-medium text-gray-900 dark:text-white">${course.title}</h4>
                        <span class="text-sm text-gray-500 dark:text-gray-400">${Math.round(course.progress)}%</span>
                    </div>
                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-2">
                        <div class="bg-primary-600 h-2 rounded-full transition-all duration-500" style="width: ${course.progress}%"></div>
                    </div>
                    <div class="flex justify-between text-xs text-gray-500 dark:text-gray-400">
                        <span>${course.completedLessons}/${course.lessons} lessons</span>
                        <span>${Math.round(course.timeSpent)} min studied</span>
                    </div>
                    <div class="mt-2 flex justify-between items-center">
                        <span class="text-xs text-gray-400">Last accessed: ${new Date(course.lastAccessed).toLocaleDateString()}</span>
                        <button onclick="continueLesson(${course.id})" class="text-xs text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 transition-colors">
                            Continue →
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function updateRecentActivity(userData) {
            const recentActivityContainer = document.getElementById('recent-activity');
            
            if (userData.recentActivity.length === 0) {
                recentActivityContainer.innerHTML = `
                    <div class="text-center py-8 text-gray-500 dark:text-gray-400">
                        <span class="text-4xl block mb-2">📝</span>
                        <p>No recent activity</p>
                    </div>
                `;
                return;
            }

            recentActivityContainer.innerHTML = userData.recentActivity.map(activity => `
                <div class="flex items-center space-x-4">
                    <div class="w-10 h-10 bg-${getActivityColor(activity.type)}-100 dark:bg-${getActivityColor(activity.type)}-900 rounded-full flex items-center justify-center">
                        <span class="text-${getActivityColor(activity.type)}-600 dark:text-${getActivityColor(activity.type)}-400">${activity.icon}</span>
                    </div>
                    <div class="flex-1">
                        <p class="text-sm font-medium text-gray-900 dark:text-white">${activity.message}</p>
                        <p class="text-xs text-gray-500 dark:text-gray-400">${getTimeAgo(activity.timestamp)}</p>
                    </div>
                </div>
            `).join('');
        }

        function updateAchievements(userData) {
            const achievementsContainer = document.getElementById('achievements');
            
            achievementsContainer.innerHTML = userData.achievements.map(achievement => `
                <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg transition-colors ${achievement.unlocked ? 'ring-2 ring-primary-500' : 'opacity-60'}">
                    <div class="text-center">
                        <div class="text-3xl mb-2 ${achievement.unlocked ? '' : 'grayscale'}">${achievement.icon}</div>
                        <h4 class="font-medium text-gray-900 dark:text-white text-sm">${achievement.name}</h4>
                        <p class="text-xs text-gray-600 dark:text-gray-400 mt-1">${achievement.description}</p>
                        ${achievement.unlocked ? `<div class="mt-2 text-xs text-primary-600 dark:text-primary-400">Unlocked!</div>` : ''}
                    </div>
                </div>
            `).join('');
        }

        function updateLearningAnalytics(userData) {
            // Calculate weekly hours
            const weeklyMinutes = userData.weeklyHours.reduce((sum, hours) => sum + hours, 0);
            const weeklyHours = Math.round(weeklyMinutes / 60 * 10) / 10;
            document.getElementById('weekly-hours').textContent = `${weeklyHours}h`;

            // Calculate average session time
            const totalSessions = userData.recentActivity.filter(a => a.type === 'progress').length || 1;
            const avgSession = Math.round(userData.totalHoursLearned * 60 / totalSessions);
            document.getElementById('avg-session').textContent = `${avgSession}m`;

            // Current streak (simplified calculation)
            const streak = Math.min(userData.recentActivity.length, 7);
            document.getElementById('current-streak').textContent = `${streak} days`;

            // Completion rate
            const completionRate = userData.enrolledCourses.length > 0 
                ? Math.round((userData.completedCourses.length / userData.enrolledCourses.length) * 100)
                : 0;
            document.getElementById('completion-rate').textContent = `${completionRate}%`;

            // Favorite category
            const categories = userData.enrolledCourses.map(course => course.category);
            const categoryCount = categories.reduce((acc, cat) => {
                acc[cat] = (acc[cat] || 0) + 1;
                return acc;
            }, {});
            
            const favoriteCategory = Object.keys(categoryCount).length > 0
                ? Object.keys(categoryCount).reduce((a, b) => categoryCount[a] > categoryCount[b] ? a : b)
                : 'None';
            
            const displayCategory = favoriteCategory !== 'None' 
                ? favoriteCategory.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase())
                : 'None';
            
            document.getElementById('favorite-category').textContent = displayCategory;
        }

        function refreshDashboard() {
            if (!currentUser) return;
            
            showMessage('Refreshing dashboard...', 'info');
            
            // Simulate API call delay
            setTimeout(() => {
                updateDashboard();
                showMessage('Dashboard updated!', 'success');
            }, 1000);
        }

        function simulateProgress() {
            if (!currentUser) return;
            
            const userData = userDataManager.getUserData();
            if (userData.enrolledCourses.length === 0) {
                showMessage('Enroll in a course first to simulate progress!', 'error');
                return;
            }

            showMessage('Simulating learning progress...', 'info');
            
            setTimeout(() => {
                userDataManager.simulateProgressUpdate();
                updateDashboard();
                showMessage('Progress updated! Keep learning! 📚', 'success');
            }, 1500);
        }

        function continueLesson(courseId) {
            showCourseDetail(courseId);
        }

        // Utility functions for dashboard
        function getActivityColor(type) {
            const colors = {
                enrollment: 'blue',
                progress: 'green',
                completion: 'purple',
                achievement: 'yellow'
            };
            return colors[type] || 'gray';
        }

        function getTimeAgo(timestamp) {
            const now = new Date();
            const time = new Date(timestamp);
            const diffInMinutes = Math.floor((now - time) / (1000 * 60));
            
            if (diffInMinutes < 1) return 'Just now';
            if (diffInMinutes < 60) return `${diffInMinutes} minutes ago`;
            if (diffInMinutes < 1440) return `${Math.floor(diffInMinutes / 60)} hours ago`;
            return `${Math.floor(diffInMinutes / 1440)} days ago`;
        }

        // Course Management
        function displayCourses(category = 'all') {
            const coursesGrid = document.getElementById('courses-grid');
            if (!coursesGrid) return;

            const filteredCourses = category === 'all' ? courses : courses.filter(course => course.category === category);

            coursesGrid.innerHTML = filteredCourses.map(course => `
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden transition-colors hover:shadow-xl">
                    <div class="h-48 bg-gradient-to-r ${getGradientForCategory(course.category)} flex items-center justify-center">
                        <span class="text-6xl">${course.image}</span>
                    </div>
                    <div class="p-6">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-xs font-medium text-primary-600 dark:text-primary-400 uppercase tracking-wide">${course.category.replace('-', ' ')}</span>
                            <span class="text-xs text-gray-500 dark:text-gray-400">${course.level}</span>
                        </div>
                        <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-2">${course.title}</h3>
                        <p class="text-gray-600 dark:text-gray-300 mb-4 text-sm">${course.description}</p>
                        <div class="flex items-center text-sm text-gray-500 dark:text-gray-400 mb-4 space-x-4">
                            <span>⏱️ ${course.duration}</span>
                            <span>📚 ${course.lessons} lessons</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-2xl font-bold text-primary-600 dark:text-primary-400">$${course.price}</span>
                            <div class="space-x-2">
                                <button onclick="showCourseDetail(${course.id})" class="text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 text-sm font-medium transition-colors">
                                    View Details
                                </button>
                                <button onclick="addToCart(${course.id})" class="bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg text-sm transition-colors">
                                    Add to Cart
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function getGradientForCategory(category) {
            const gradients = {
                'web-development': 'from-blue-500 to-purple-600',
                'data-science': 'from-green-500 to-blue-600',
                'design': 'from-purple-500 to-pink-600',
                'business': 'from-orange-500 to-red-600',
                'mobile': 'from-indigo-500 to-purple-600'
            };
            return gradients[category] || 'from-gray-500 to-gray-600';
        }

        function filterCourses(category) {
            // Update active button
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('active', 'bg-primary-600', 'text-white');
                btn.classList.add('bg-gray-200', 'dark:bg-gray-700', 'text-gray-700', 'dark:text-gray-300');
            });
            
            event.target.classList.add('active', 'bg-primary-600', 'text-white');
            event.target.classList.remove('bg-gray-200', 'dark:bg-gray-700', 'text-gray-700', 'dark:text-gray-300');

            displayCourses(category);
        }

        function showCourseDetail(courseId) {
            const course = courses.find(c => c.id === courseId);
            if (!course) return;

            // Update course detail page content
            const courseDetailPage = document.getElementById('course-page');
            courseDetailPage.innerHTML = `
                <div class="fade-in">
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden transition-colors">
                        <div class="p-8">
                            <div class="flex items-center mb-4">
                                <button onclick="showPage('courses')" class="text-primary-600 dark:text-primary-400 hover:text-primary-700 dark:hover:text-primary-300 mr-4">
                                    ← Back to Courses
                                </button>
                                <span class="text-sm font-medium text-primary-600 dark:text-primary-400 uppercase tracking-wide">${course.category.replace('-', ' ')}</span>
                            </div>
                            <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-4">${course.title}</h1>
                            <p class="text-gray-600 dark:text-gray-300 mb-8">${course.description}</p>
                            
                            <!-- Video Player Section -->
                            <div class="relative mb-8">
                                <div class="relative bg-black rounded-lg overflow-hidden">
                                    <video id="course-video" class="w-full h-64 md:h-96" controls>
                                        <source src="https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4" type="video/mp4">
                                        <source src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4" type="video/mp4">
                                        Your browser does not support the video tag.
                                    </video>
                                    <canvas id="video-overlay" class="video-overlay w-full h-64 md:h-96"></canvas>
                                </div>
                                
                                <!-- Custom Controls -->
                                <div class="bg-gray-100 dark:bg-gray-700 p-4 rounded-b-lg transition-colors">
                                    <div class="flex items-center space-x-4">
                                        <button id="play-pause-btn" onclick="togglePlayPause()" class="bg-primary-600 hover:bg-primary-700 text-white p-2 rounded-full transition-colors">
                                            ▶️
                                        </button>
                                        <div class="flex-1">
                                            <input type="range" id="progress-bar" class="w-full" min="0" max="100" value="0">
                                        </div>
                                        <span id="time-display" class="text-sm text-gray-600 dark:text-gray-300">0:00 / 0:00</span>
                                        <input type="range" id="volume-control" class="w-20" min="0" max="100" value="100">
                                        <span class="text-sm">🔊</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Course Content -->
                            <div class="grid md:grid-cols-3 gap-8">
                                <div class="md:col-span-2">
                                    <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">Course Content</h3>
                                    <div class="space-y-4">
                                        ${generateCourseLessons(course)}
                                    </div>
                                </div>
                                <div>
                                    <div class="bg-gray-50 dark:bg-gray-700 p-6 rounded-lg transition-colors">
                                        <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">Course Details</h3>
                                        <div class="space-y-3 text-sm">
                                            <div class="flex justify-between">
                                                <span class="text-gray-600 dark:text-gray-300">Duration:</span>
                                                <span class="text-gray-900 dark:text-white">${course.duration}</span>
                                            </div>
                                            <div class="flex justify-between">
                                                <span class="text-gray-600 dark:text-gray-300">Lessons:</span>
                                                <span class="text-gray-900 dark:text-white">${course.lessons}</span>
                                            </div>
                                            <div class="flex justify-between">
                                                <span class="text-gray-600 dark:text-gray-300">Level:</span>
                                                <span class="text-gray-900 dark:text-white">${course.level}</span>
                                            </div>
                                            <div class="flex justify-between">
                                                <span class="text-gray-600 dark:text-gray-300">Price:</span>
                                                <span class="text-2xl font-bold text-primary-600 dark:text-primary-400">$${course.price}</span>
                                            </div>
                                        </div>
                                        <button onclick="addToCart(${course.id})" class="w-full mt-6 bg-primary-600 hover:bg-primary-700 text-white font-bold py-3 px-4 rounded-lg transition-colors">
                                            Add to Cart
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            showPage('course');
            // Re-setup video player for the new content
            setTimeout(() => setupVideoPlayer(), 100);
        }

        function generateCourseLessons(course) {
            const lessonTopics = {
                'web-development': ['Introduction & Setup', 'Variables & Data Types', 'Functions & Scope', 'DOM Manipulation', 'Async Programming'],
                'data-science': ['Data Collection', 'Data Cleaning', 'Exploratory Analysis', 'Statistical Methods', 'Visualization'],
                'design': ['Design Principles', 'Color Theory', 'Typography', 'Layout & Composition', 'User Experience'],
                'business': ['Market Research', 'Strategy Development', 'Implementation', 'Analytics & Metrics', 'Optimization'],
                'mobile': ['Platform Setup', 'UI Components', 'Navigation', 'Data Management', 'Publishing']
            };

            const topics = lessonTopics[course.category] || ['Introduction', 'Fundamentals', 'Intermediate Concepts', 'Advanced Topics', 'Final Project'];
            
            return topics.map((topic, index) => `
                <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg transition-colors">
                    <h4 class="font-medium text-gray-900 dark:text-white">${index + 1}. ${topic}</h4>
                    <p class="text-sm text-gray-600 dark:text-gray-300">Learn about ${topic.toLowerCase()} in ${course.title}</p>
                </div>
            `).join('');
        }

        // Authentication
        function handleLogin(event) {
            event.preventDefault();
            const form = event.target;
            const email = form.querySelector('#login-email').value;
            const password = form.querySelector('#login-password').value;

            showLoading(form);

            // Simulate API call
            setTimeout(() => {
                if (email && password.length >= 6) {
                    currentUser = {
                        id: email.replace(/[^a-zA-Z0-9]/g, ''), // Simple ID generation
                        name: email.split('@')[0],
                        email: email,
                        token: 'jwt-token-' + Date.now()
                    };
                    
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                    updateAuthUI();
                    updateDashboard();
                    showMessage('Login successful!', 'success');
                    showPage('dashboard');
                } else {
                    showMessage('Invalid credentials', 'error');
                }
                hideLoading(form);
            }, 1500);
        }

        function handleRegister(event) {
            event.preventDefault();
            const form = event.target;
            const name = form.querySelector('#register-name').value;
            const email = form.querySelector('#register-email').value;
            const password = form.querySelector('#register-password').value;
            const confirm = form.querySelector('#register-confirm').value;

            if (password !== confirm) {
                showMessage('Passwords do not match', 'error');
                return;
            }

            showLoading(form);

            // Simulate API call
            setTimeout(() => {
                currentUser = {
                    id: email.replace(/[^a-zA-Z0-9]/g, ''), // Simple ID generation
                    name: name,
                    email: email,
                    token: 'jwt-token-' + Date.now()
                };
                
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                updateAuthUI();
                updateDashboard();
                showMessage('Account created successfully!', 'success');
                showPage('dashboard');
                hideLoading(form);
            }, 1500);
        }

        function logout() {
            currentUser = null;
            localStorage.removeItem('currentUser');
            updateAuthUI();
            showMessage('Logged out successfully', 'success');
            showPage('home');
        }

        function updateAuthUI() {
            const authButtons = document.getElementById('auth-buttons');
            const userMenu = document.getElementById('user-menu');
            const userName = document.getElementById('user-name');
            const userAvatar = document.getElementById('user-avatar');
            const mobileAuthButtons = document.getElementById('mobile-auth-buttons');
            const mobileUserMenu = document.getElementById('mobile-user-menu');
            const mobileUserName = document.getElementById('mobile-user-name');
            const mobileUserAvatar = document.getElementById('mobile-user-avatar');

            if (currentUser) {
                authButtons.classList.add('hidden');
                userMenu.classList.remove('hidden');
                userName.textContent = currentUser.name;
                
                // Set user avatar initials
                const initials = currentUser.name.split(' ').map(n => n[0]).join('').toUpperCase();
                userAvatar.textContent = initials;
                
                mobileAuthButtons.classList.add('hidden');
                mobileUserMenu.classList.remove('hidden');
                mobileUserName.textContent = currentUser.name;
                mobileUserAvatar.textContent = initials;
            } else {
                authButtons.classList.remove('hidden');
                userMenu.classList.add('hidden');
                
                mobileAuthButtons.classList.remove('hidden');
                mobileUserMenu.classList.add('hidden');
            }
        }

        // Mobile Menu Functions
        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobile-menu');
            const openIcon = document.getElementById('mobile-menu-icon-open');
            const closeIcon = document.getElementById('mobile-menu-icon-close');
            
            if (mobileMenu.classList.contains('hidden')) {
                mobileMenu.classList.remove('hidden');
                openIcon.classList.add('hidden');
                closeIcon.classList.remove('hidden');
            } else {
                mobileMenu.classList.add('hidden');
                openIcon.classList.remove('hidden');
                closeIcon.classList.add('hidden');
            }
        }

        function closeMobileMenu() {
            const mobileMenu = document.getElementById('mobile-menu');
            const openIcon = document.getElementById('mobile-menu-icon-open');
            const closeIcon = document.getElementById('mobile-menu-icon-close');
            
            mobileMenu.classList.add('hidden');
            openIcon.classList.remove('hidden');
            closeIcon.classList.add('hidden');
        }

        // User Dropdown Functions
        function toggleUserDropdown() {
            const dropdown = document.getElementById('user-dropdown');
            dropdown.classList.toggle('hidden');
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const dropdown = document.getElementById('user-dropdown');
            const button = event.target.closest('button[onclick="toggleUserDropdown()"]');
            
            if (!button && dropdown && !dropdown.contains(event.target)) {
                dropdown.classList.add('hidden');
            }
        });

        // Cart Management
        function addToCart(courseId) {
            const course = courses.find(c => c.id === courseId);
            if (course && !cart.find(item => item.id === courseId)) {
                cart.push(course);
                localStorage.setItem('cart', JSON.stringify(cart));
                updateCartUI();
                showMessage(`${course.title} added to cart!`, 'success');
            }
        }

        function removeFromCart(courseId) {
            cart = cart.filter(item => item.id !== courseId);
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartUI();
            showMessage('Item removed from cart', 'success');
        }

        function updateCartUI() {
            const cartCount = document.getElementById('cart-count');
            const cartItems = document.getElementById('cart-items');
            const emptyCart = document.getElementById('empty-cart');
            const cartSubtotal = document.getElementById('cart-subtotal');
            const cartTax = document.getElementById('cart-tax');
            const cartTotal = document.getElementById('cart-total');
            const checkoutBtn = document.getElementById('checkout-btn');

            cartCount.textContent = cart.length;

            if (cart.length === 0) {
                if (cartItems) cartItems.innerHTML = '';
                if (emptyCart) emptyCart.classList.remove('hidden');
                if (checkoutBtn) checkoutBtn.disabled = true;
                if (cartSubtotal) cartSubtotal.textContent = '$0';
                if (cartTax) cartTax.textContent = '$0';
                if (cartTotal) cartTotal.textContent = '$0';
            } else {
                if (emptyCart) emptyCart.classList.add('hidden');
                if (checkoutBtn) checkoutBtn.disabled = false;

                const subtotal = cart.reduce((sum, item) => sum + item.price, 0);
                const tax = subtotal * 0.1;
                const total = subtotal + tax;

                if (cartSubtotal) cartSubtotal.textContent = `$${subtotal}`;
                if (cartTax) cartTax.textContent = `$${tax.toFixed(2)}`;
                if (cartTotal) cartTotal.textContent = `$${total.toFixed(2)}`;

                if (cartItems) {
                    cartItems.innerHTML = cart.map(item => `
                        <div class="bg-white dark:bg-gray-800 p-4 rounded-lg shadow transition-colors">
                            <div class="flex items-center space-x-4">
                                <div class="w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center">
                                    <span class="text-2xl">${item.image}</span>
                                </div>
                                <div class="flex-1">
                                    <h3 class="font-semibold text-gray-900 dark:text-white">${item.title}</h3>
                                    <p class="text-gray-600 dark:text-gray-400">Online Course</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-lg font-bold text-primary-600 dark:text-primary-400">$${item.price}</p>
                                    <button onclick="removeFromCart(${item.id})" class="text-red-600 hover:text-red-700 text-sm transition-colors">
                                        Remove
                                    </button>
                                </div>
                            </div>
                        </div>
                    `).join('');
                }
            }
        }

        function checkout() {
            if (!currentUser) {
                showMessage('Please login to checkout', 'error');
                showPage('login');
                return;
            }

            if (cart.length === 0) {
                showMessage('Your cart is empty', 'error');
                return;
            }

            // Simulate checkout process
            showMessage('Processing order...', 'info');
            
            setTimeout(() => {
                // Enroll user in purchased courses
                cart.forEach(course => {
                    userDataManager.enrollUserInCourse(course.id);
                });

                // Clear cart
                cart = [];
                localStorage.setItem('cart', JSON.stringify(cart));
                updateCartUI();
                updateDashboard();

                showMessage('🎉 Order placed successfully! You are now enrolled in your courses!', 'success');
                showPage('dashboard');
            }, 2000);
        }

        // Video Player
        function setupVideoPlayer() {
            const video = document.getElementById('course-video');
            const canvas = document.getElementById('video-overlay');
            const playPauseBtn = document.getElementById('play-pause-btn');
            const progressBar = document.getElementById('progress-bar');
            const timeDisplay = document.getElementById('time-display');
            const volumeControl = document.getElementById('volume-control');

            if (!video) return;

            const ctx = canvas ? canvas.getContext('2d') : null;

            video.addEventListener('loadedmetadata', function() {
                if (canvas) {
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                }
                if (progressBar) progressBar.max = video.duration;
            });

            video.addEventListener('timeupdate', function() {
                if (progressBar) progressBar.value = video.currentTime;
                updateTimeDisplay();
                if (ctx) drawProgressOverlay();
            });

            video.addEventListener('play', function() {
                if (playPauseBtn) playPauseBtn.textContent = '⏸️';
            });

            video.addEventListener('pause', function() {
                if (playPauseBtn) playPauseBtn.textContent = '▶️';
            });

            if (progressBar) {
                progressBar.addEventListener('input', function() {
                    video.currentTime = progressBar.value;
                });
            }

            if (volumeControl) {
                volumeControl.addEventListener('input', function() {
                    video.volume = volumeControl.value / 100;
                });
            }

            function updateTimeDisplay() {
                if (!timeDisplay) return;
                const current = formatTime(video.currentTime);
                const duration = formatTime(video.duration);
                timeDisplay.textContent = `${current} / ${duration}`;
            }

            function formatTime(seconds) {
                const mins = Math.floor(seconds / 60);
                const secs = Math.floor(seconds % 60);
                return `${mins}:${secs.toString().padStart(2, '0')}`;
            }

            function drawProgressOverlay() {
                if (!video.duration || !ctx) return;
                
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Draw progress indicator
                const progress = video.currentTime / video.duration;
                const barWidth = canvas.width * 0.8;
                const barHeight = 4;
                const x = (canvas.width - barWidth) / 2;
                const y = canvas.height - 30;

                // Background
                ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
                ctx.fillRect(x, y, barWidth, barHeight);

                // Progress
                ctx.fillStyle = '#3b82f6';
                ctx.fillRect(x, y, barWidth * progress, barHeight);
            }
        }

        function togglePlayPause() {
            const video = document.getElementById('course-video');
            if (video) {
                if (video.paused) {
                    video.play();
                } else {
                    video.pause();
                }
            }
        }

        // Form Validation
        function setupFormValidation() {
            const forms = document.querySelectorAll('form');
            forms.forEach(form => {
                const inputs = form.querySelectorAll('input');
                inputs.forEach(input => {
                    input.addEventListener('input', validateInput);
                    input.addEventListener('invalid', showValidationError);
                });
            });

            // Password confirmation validation
            const confirmInput = document.getElementById('register-confirm');
            if (confirmInput) {
                confirmInput.addEventListener('input', function() {
                    const password = document.getElementById('register-password').value;
                    const confirm = this.value;
                    
                    if (confirm && password !== confirm) {
                        this.setCustomValidity('Passwords do not match');
                        showInputError(this, 'Passwords do not match');
                    } else {
                        this.setCustomValidity('');
                        hideInputError(this);
                    }
                });
            }
        }

        function validateInput(event) {
            const input = event.target;
            if (input.validity.valid) {
                hideInputError(input);
            } else {
                showValidationError(event);
            }
        }

        function showValidationError(event) {
            const input = event.target;
            let message = '';

            if (input.validity.valueMissing) {
                message = 'This field is required';
            } else if (input.validity.typeMismatch) {
                message = 'Please enter a valid ' + input.type;
            } else if (input.validity.tooShort) {
                message = `Minimum ${input.minLength} characters required`;
            } else if (input.validity.patternMismatch) {
                message = 'Please match the required format';
            }

            showInputError(input, message);
        }

        function showInputError(input, message) {
            input.classList.add('border-red-500');
            const errorDiv = input.parentNode.querySelector('.error-message');
            if (errorDiv) {
                errorDiv.textContent = message;
                errorDiv.classList.remove('hidden');
            }
        }

        function hideInputError(input) {
            input.classList.remove('border-red-500');
            const errorDiv = input.parentNode.querySelector('.error-message');
            if (errorDiv) {
                errorDiv.classList.add('hidden');
            }
        }

        // Utility Functions
        function showLoading(form) {
            const button = form.querySelector('button[type="submit"]');
            const buttonText = button.querySelector('.button-text');
            const spinner = button.querySelector('.loading-spinner');
            
            buttonText.textContent = 'Processing...';
            spinner.classList.remove('hidden');
            button.disabled = true;
        }

        function hideLoading(form) {
            const button = form.querySelector('button[type="submit"]');
            const buttonText = button.querySelector('.button-text');
            const spinner = button.querySelector('.loading-spinner');
            
            buttonText.textContent = form.id === 'login-form' ? 'Login' : 'Create Account';
            spinner.classList.add('hidden');
            button.disabled = false;
        }

        function showMessage(message, type = 'info') {
            const container = document.getElementById('message-container');
            const messageDiv = document.createElement('div');
            
            const bgColor = {
                success: 'bg-green-500',
                error: 'bg-red-500',
                info: 'bg-blue-500'
            }[type];

            messageDiv.className = `${bgColor} text-white px-6 py-3 rounded-lg shadow-lg mb-4 fade-in`;
            messageDiv.textContent = message;
            
            container.appendChild(messageDiv);
            
            setTimeout(() => {
                messageDiv.remove();
            }, 5000);
        }

        // Feedback System Functions
        function initializeFeedbackPage() {
            // Load saved feedback
            const savedFeedback = localStorage.getItem('edustream_feedback');
            if (savedFeedback) {
                feedbackData = JSON.parse(savedFeedback);
            }

            // Populate course dropdown
            populateCourseDropdown();
            
            // Setup character counter
            const feedbackMessage = document.getElementById('feedback-message');
            const charCount = document.getElementById('char-count');
            
            if (feedbackMessage && charCount) {
                feedbackMessage.addEventListener('input', function() {
                    const count = this.value.length;
                    charCount.textContent = count;
                    
                    if (count > 500) {
                        this.value = this.value.substring(0, 500);
                        charCount.textContent = 500;
                    }
                    
                    if (count > 450) {
                        charCount.classList.add('text-red-500');
                    } else {
                        charCount.classList.remove('text-red-500');
                    }
                });
            }

            // Display existing feedback
            displayFeedback();
            updateFeedbackStats();
        }

        function populateCourseDropdown() {
            const courseSelect = document.getElementById('feedback-course');
            if (!courseSelect) return;

            // Clear existing options except the first one
            courseSelect.innerHTML = '<option value="">Select a course or leave blank for general feedback</option>';

            // Add enrolled courses if user is logged in
            if (currentUser) {
                const userData = userDataManager.getUserData();
                userData.enrolledCourses.forEach(course => {
                    const option = document.createElement('option');
                    option.value = course.id;
                    option.textContent = course.title;
                    courseSelect.appendChild(option);
                });
            }

            // Add all courses as options
            courses.forEach(course => {
                const option = document.createElement('option');
                option.value = course.id;
                option.textContent = course.title;
                courseSelect.appendChild(option);
            });
        }

        function setRating(rating) {
            currentRating = rating;
            document.getElementById('rating-value').value = rating;
            
            const stars = document.querySelectorAll('.star-btn');
            const ratingText = document.getElementById('rating-text');
            
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.classList.remove('text-gray-300');
                    star.classList.add('text-yellow-400');
                } else {
                    star.classList.remove('text-yellow-400');
                    star.classList.add('text-gray-300');
                }
            });

            const ratingTexts = ['', 'Poor', 'Fair', 'Good', 'Very Good', 'Excellent'];
            ratingText.textContent = ratingTexts[rating] || 'Click to rate';
        }

        function submitFeedback(event) {
            event.preventDefault();
            
            const form = event.target;
            const courseId = document.getElementById('feedback-course').value;
            const rating = parseInt(document.getElementById('rating-value').value);
            const feedbackType = document.querySelector('input[name="feedback-type"]:checked')?.value;
            const message = document.getElementById('feedback-message').value;
            const isAnonymous = document.getElementById('anonymous-feedback').checked;

            if (rating === 0) {
                showMessage('Please provide a rating', 'error');
                return;
            }

            if (!feedbackType) {
                showMessage('Please select a feedback type', 'error');
                return;
            }

            showLoading(form);

            // Simulate API submission
            setTimeout(() => {
                const feedback = {
                    id: Date.now(),
                    courseId: courseId || null,
                    courseName: courseId ? courses.find(c => c.id == courseId)?.title || 'Unknown Course' : 'General Feedback',
                    rating: rating,
                    type: feedbackType,
                    message: message,
                    isAnonymous: isAnonymous,
                    userName: isAnonymous ? 'Anonymous' : (currentUser?.name || 'Guest'),
                    timestamp: new Date().toISOString(),
                    helpful: 0
                };

                feedbackData.unshift(feedback);
                localStorage.setItem('edustream_feedback', JSON.stringify(feedbackData));

                // Reset form
                form.reset();
                setRating(0);
                currentRating = 0;

                // Update display
                displayFeedback();
                updateFeedbackStats();

                hideLoading(form);
                showMessage('Thank you for your feedback! 🙏', 'success');
            }, 1500);
        }

        function displayFeedback(filter = 'all') {
            const feedbackList = document.getElementById('feedback-list');
            const noFeedback = document.getElementById('no-feedback');
            
            if (!feedbackList || !noFeedback) return;

            let filteredFeedback = feedbackData;
            
            if (filter !== 'all') {
                filteredFeedback = feedbackData.filter(f => f.rating == filter);
            }

            if (filteredFeedback.length === 0) {
                feedbackList.innerHTML = '';
                noFeedback.classList.remove('hidden');
                return;
            }

            noFeedback.classList.add('hidden');
            
            feedbackList.innerHTML = filteredFeedback.map(feedback => `
                <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-lg transition-colors">
                    <div class="flex flex-col sm:flex-row sm:items-start sm:justify-between mb-2">
                        <div class="flex items-center space-x-2 mb-2 sm:mb-0">
                            <span class="font-medium text-gray-900 dark:text-white text-sm">${feedback.userName}</span>
                            <div class="flex items-center">
                                ${generateStarDisplay(feedback.rating)}
                            </div>
                        </div>
                        <div class="text-xs text-gray-500 dark:text-gray-400">
                            ${getTimeAgo(feedback.timestamp)}
                        </div>
                    </div>
                    
                    <div class="mb-2">
                        <span class="inline-block bg-primary-100 dark:bg-primary-900 text-primary-800 dark:text-primary-200 text-xs px-2 py-1 rounded-full mr-2">
                            ${feedback.type.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase())}
                        </span>
                        ${feedback.courseId ? `<span class="inline-block bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 text-xs px-2 py-1 rounded-full">${feedback.courseName}</span>` : ''}
                    </div>
                    
                    <p class="text-gray-700 dark:text-gray-300 text-sm mb-3">${feedback.message}</p>
                    
                    <div class="flex items-center justify-between">
                        <button onclick="markHelpful(${feedback.id})" class="text-xs text-gray-500 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400 transition-colors">
                            👍 Helpful (${feedback.helpful})
                        </button>
                        <div class="text-xs text-gray-400">
                            #${feedback.id}
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function generateStarDisplay(rating) {
            let stars = '';
            for (let i = 1; i <= 5; i++) {
                stars += `<span class="text-sm ${i <= rating ? 'text-yellow-400' : 'text-gray-300'}">⭐</span>`;
            }
            return stars;
        }

        function filterFeedback(rating) {
            // Update active filter button
            document.querySelectorAll('.feedback-filter-btn').forEach(btn => {
                btn.classList.remove('active', 'bg-primary-600', 'text-white');
                btn.classList.add('bg-gray-200', 'dark:bg-gray-700', 'text-gray-700', 'dark:text-gray-300');
            });
            
            event.target.classList.add('active', 'bg-primary-600', 'text-white');
            event.target.classList.remove('bg-gray-200', 'dark:bg-gray-700', 'text-gray-700', 'dark:text-gray-300');

            displayFeedback(rating);
        }

        function markHelpful(feedbackId) {
            const feedback = feedbackData.find(f => f.id === feedbackId);
            if (feedback) {
                feedback.helpful += 1;
                localStorage.setItem('edustream_feedback', JSON.stringify(feedbackData));
                displayFeedback();
                showMessage('Thanks for marking this helpful! 👍', 'success');
            }
        }

        function updateFeedbackStats() {
            const totalFeedback = document.getElementById('total-feedback');
            const averageRating = document.getElementById('average-rating');
            const positiveFeedback = document.getElementById('positive-feedback');
            const responseRate = document.getElementById('response-rate');

            if (!totalFeedback) return;

            const total = feedbackData.length;
            totalFeedback.textContent = total;

            if (total > 0) {
                const avgRating = feedbackData.reduce((sum, f) => sum + f.rating, 0) / total;
                averageRating.textContent = avgRating.toFixed(1);

                const positive = feedbackData.filter(f => f.rating >= 4).length;
                const positivePercent = Math.round((positive / total) * 100);
                positiveFeedback.textContent = `${positivePercent}%`;
            } else {
                averageRating.textContent = '0.0';
                positiveFeedback.textContent = '0%';
            }

            responseRate.textContent = '100%'; // Simulated response rate
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97853a3652b30333',t:'MTc1NjczNDUyOS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
